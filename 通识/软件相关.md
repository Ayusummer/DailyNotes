<!--

 * @Author: your name
 * @Date: 2021-03-18 19:54:25
 * @LastEditTime: 2021-07-17 21:49:37
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \DailyNotes\软件相关.md
-->
# 目录
- [目录](#目录)
- [Programming](#programming)
  - [Visual Studio](#visual-studio)
    - [快捷键相关](#快捷键相关)
      - [Ctrl+Shift+P 不可用](#ctrlshiftp-不可用)
    - [编码相关](#编码相关)
  - [VSCode](#vscode)
    - [快捷键相关](#快捷键相关-1)
    - [命令行](#命令行)
    - [扩展相关](#扩展相关)
      - [`PlantUML` ---- 流程图绘制](#plantuml------流程图绘制)
      - [`Markdown Preview Enhanced`](#markdown-preview-enhanced)
      - [clang-format](#clang-format)
      - [Jupyter](#jupyter)
        - [Jupyter 导出 PDF 报错](#jupyter-导出-pdf-报错)
  - [Pycharm](#pycharm)
    - [换源操作](#换源操作)
      - [单次 `pip` 命令换源](#单次-pip-命令换源)
      - [项目使用的 `python解释器` 换源](#项目使用的-python解释器-换源)
  - [anaconda](#anaconda)
    - [`Anaconda`换源](#anaconda换源)
    - [报错收集](#报错收集)
      - [`check_hostname requires server_hostname`](#check_hostname-requires-server_hostname)
      - [各类 HTTPError 相关](#各类-httperror-相关)
      - [`ModuleNotFoundError: No module named 'pip._vendor....'`](#modulenotfounderror-no-module-named-pip_vendor)
    - [自动生成conda环境依赖](#自动生成conda环境依赖)
      - [`pip freeze`](#pip-freeze)
      - [`pipreqs`](#pipreqs)
    - [命令行切换到对应 conda 环境](#命令行切换到对应-conda-环境)
    - [命令行自动启动 conda 环境](#命令行自动启动-conda-环境)
  - [`nodejs` 升级](#nodejs-升级)
  - [npm](#npm)
    - [换源](#换源)
      - [源地址](#源地址)
      - [临时替换](#临时替换)
      - [持久使用](#持久使用)
- [日常](#日常)
  - [浏览器扩展](#浏览器扩展)
    - [JSON Formatter](#json-formatter)
  - [Typora](#typora)
    - [踩坑](#踩坑)
      - [image load failed](#image-load-failed)
      - [无法正常导出PDF](#无法正常导出pdf)
    - [LaTeX 相关](#latex-相关)

# Programming

---

## Visual Studio

----

### 快捷键相关

```
Ctrl + M + O: 折叠所有方法
Ctrl + M + M: 折叠或者展开当前方法
Ctrl + M + L: 展开所有方法
```
---
#### Ctrl+Shift+P 不可用
热键冲突, 和 PicGo 冲了, 把 PicGo 快捷上传的热键改成其他的就行了
> [解决 VSCode Ctrl Shift P 快捷键不可用_团子大圆帅的博客-CSDN博客](https://blog.csdn.net/jpch89/article/details/109381076)

---

### 编码相关

- vs将默认编码调成UTF-8 : vs默认编码非UTF-8,可以通过如下扩展更改默认编码为UTF-8
  - 拓展——>联机——>force UTF-8（No BOM)

----

## VSCode

---

### 快捷键相关

```
Ctrl+K, Ctrl+J : 展开所有方法
Ctrl+K, Ctrl+0 : 折叠所有方法
```

---
### 命令行
- 命令行中使用 `code .` 命令可以新建一个以当前命令行作用目录为根目录的 VSCode 窗口, 相应的 `.\`, `..` 等相对路径的使用方式不再赘述


----

### 扩展相关

----

#### `PlantUML` ---- 流程图绘制

![20210522214659](http://cdn.ayusummer233.top/img/20210522214659.png)

- [官网](https://plantuml.com/zh/)
- PlantUML 是一个开源项目，支持快速绘制：
  - 时序图
  - 用例图
  - 类图
  - 对象图
  - 活动图
  - 组件图
  - 部署图
  - 状态图
  - 定时图
- 同时还支持以下非UML图：
  - JSON 数据
  - YAML 数据
  - 网络图 (nwdiag)
  - 线框图形界面
  - 架构图
  - 规范和描述语言 (SDL)
  - Ditaa 图
  - 甘特图
  - 思维导图
  - WBS 工作分解图
  - 以 AsciiMath 或 JLaTeXMath 符号的数学公式
  - 实体关系图

----

#### `Markdown Preview Enhanced`

![20210522215021](http://cdn.ayusummer233.top/img/20210522215021.png)

----

- 可以用来绘制流程图
- [官网文档](https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/diagrams)
- `flow`代码块中的代码会被[flowchart.js](https://flowchart.js.org/)渲染
- [参考链接](https://segmentfault.com/a/1190000006247465###)

---
#### clang-format

> [Clang 13 documentation](https://clang.llvm.org/docs/ClangFormat.html)  
> [clang-format 使用介绍 - 掘金 (juejin.cn)](https://juejin.cn/post/6844904174736375815)  
> [llvm/llvm-project: The LLVM Project is a collection of modular and reusable compiler and toolchain technologies. Note: the repository does not accept github pull requests at this moment. Please submit your patches at http://reviews.llvm.org.](https://github.com/llvm/llvm-project)
>
> [【VScode】统一代码格式规范之 Clang-format 格式化 C++ 代码（亲测可行）_【欢迎关注，一起学习，共同进步！】-CSDN博客_clang-format.executable](https://blog.csdn.net/qq_44324181/article/details/117382733)

该程序能够自动化格式 C/C++/Obj-C 代码，支持多种代码风格：Google, Chromium, LLVM, Mozilla, WebKit，也支持自定义 style（通过编写 .clang-format 文件）。

[windows 安装包](https://ayusummer-my.sharepoint.com/:f:/g/personal/233_ayusummer_onmicrosoft_com/Ek77FVvckddBghT2aXdQC6ABaZo5ZOKuE70B0qD8Qru92Q?e=8JcbEn)

安装时选择添加 path

安装完后可以打开 cmd 检查下 clang-format 版本

```bash
clang-format.exe --version
```

VSCode 扩展商店中安装 clang-format 扩展

![20211208194743-clang-fromat-VSCode扩展界面](http://cdn.ayusummer233.top/img/20211208194743.png)

- `settings.json`中的 `[markdown.extension.clang-format]` 配置    
  ```json
  "editor.formatOnSave": true   // 是否在保存时自动格式化
  ```

- 在插件设置中配置 clang-fromat.exe 文件路径  
  ![20211208212248-在插件设置中配置 clang-fromat.exe 文件路径](http://cdn.ayusummer233.top/img/20211208212248.png)
  
- 默认 2 格缩进, 如果想改 4 格缩进请打开 `LLVM` 安装目录下的 `bin` 文件夹然后在此处打开 `powershell` 并执行:

  ```shell
  clang-format -style=llvm -dump-config > .clang-format
  ```

  打开生成的 `.clang-format` 文件, 找到 `IndentWidth` 并将其改为 4

---
#### Jupyter

##### Jupyter 导出 PDF 报错

**结论: 先导出 HTML 再导出 PDF**

> [jupyter kernal keeps dying · Issue #1892 · jupyter/notebook (github.com)](https://github.com/jupyter/notebook/issues/1892)

先按照提示把 MikTex 装了然后再尝试导出下 PDF

不行的话先清除 conda cahce  
```shell
conda clean -tipsy
```

卸载并重装以下包
- ipykernel
- ipython
- jupyter_client
- jupyter_core
- traitlets
- ipython_genutils

```shell
conda uninstall ipykernel, ipython, jupyter_client, jupyter_core, traitlets, ipython_genutils -y

conda install ipykernel ipython jupyter_client jupyter_core traitlets ipython_genutils -y
```

然后再尝试导出下 PDF

后续根据报错可能还需要安装一些包
```shell
conda install Jupyter nbconvert, yaml, pyyaml -y
```

内嵌图片总是会报错, 目前还没有找到适合我的解决方案, 找到一个相关的[github issue](https://github.com/jupyter/notebook/issues/1892)里有4年前的解决方案, 尝试无果, 只好先导出 HTML 再打印 PDF

尝试注释掉了所有图片再导出 PDF, 发现还有个问题在于中文字体不能正常显示, 那么倒不如先导出 HTML 再打印 PDF





## Pycharm

### 换源操作

---

#### 单次 `pip` 命令换源

- [参考文档](https://github.com/winrey/EasyConnectedInChina)

```python
py -3.8 -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple opencc  
py -3.8 -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
py -3.8 -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip

pip install -i https://mirrors.aliyun.com/pypi/simple/ 
```

- 镜像源地址
  - 阿里云
    <https://mirrors.aliyun.com/pypi/simple/>
  - 中国科技大学  
    <https://pypi.mirrors.ustc.edu.cn/simple/>
  - 豆瓣(douban)  
    <http://pypi.douban.com/simple/>
  - 清华大学  
    <https://pypi.tuna.tsinghua.edu.cn/simple/>
  - 中国科学技术大学  
    <http://pypi.mirrors.ustc.edu.cn/simple/>

> - 补充:将包装到指定路径:
>
>   ```Python
>   pip install -i https://pypi.tuna.tsinghua.edu.cn/simple  pygame --target=C:/Users/233/AppData/Local/Programs/Python/Python38/Lib/site-packages
>   ```

----

#### 项目使用的 `python解释器` 换源

![20210522085736](http://cdn.ayusummer233.top/img/20210522085736.png)
![20210522085759](http://cdn.ayusummer233.top/img/20210522085759.png)
![20210522085821](http://cdn.ayusummer233.top/img/20210522085821.png)

- 实际上这里我用的 `conda环境` ,相应的也可以在 `anaconda` 中进行换源配置,具体操作见[anaconda换源](#anaconda换源)

----

## anaconda

---

### `Anaconda`换源

- 在 `Anaconda Navigator` 中操作  
  ![20210522090309](http://cdn.ayusummer233.top/img/20210522090309.png)
  
  ----
- 或者用命令行操作
  - [参考链接](https://www.cnblogs.com/yuvejxke/p/13169172.html)
  - 打开 `anaconda prompt`  ，在命令行中直接使用以下命令：

    ```
    // 清华源
    conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
    conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge
    conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
    ```

    - 阿里源

    ```
    conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/free/
    
    conda config --add channels https://mirrors.aliyun.com/anaconda/cloud/conda-forge
    
    conda config --add channels https://mirrors.aliyun.com/anaconda/cloud/msys2/
    ```

---

### 报错收集

----

#### `check_hostname requires server_hostname`

- 本来是在 `Pycharm` 中新建 `conda` 环境报的错误,接着打开 `Anaconda Navigator` 也报了相同的错误
- 最终在[anaconda-issues #12410](https://github.com/ContinuumIO/anaconda-issues/issues/12410)找到的相同报错及解决方案
  - 关掉VPN即可解决(

----

#### 各类 HTTPError 相关

- 我这边报错都是清华的源报错,换成阿里的源就没问题了(
  - `https://mirrors.aliyun.com/anaconda/pkgs/main/`
  ![20210522090710](http://cdn.ayusummer233.top/img/20210522090710.png)

----
#### `ModuleNotFoundError: No module named 'pip._vendor....'`
- `pip` 出问题了
- 在 `CMD.exe Prompt` 中执行 `conda update pip` 即可



---

### 自动生成conda环境依赖

---

#### `pip freeze`

- 打开相应环境的 `CMD.exe Prompt` 执行 `pip freeze >requirements.txt` 就会在当前命令行的执行目录 (`一般是C:\Users\用户名`) 下生成一个 `requirements.txt` 文件

  ---

#### `pipreqs`

- [参考链接](https://blog.csdn.net/weixin_45329445/article/details/108008073)

  ---
- `pip freeze`会将当前 python 环境下所有的安装包都进行生成
- 而使用 `pipreqs` 的好处是可以通过对项目目录的扫描，生成依赖清单。
- 安装

  ```
  pip install pipreqs
  ```

- 在项目根目录使用如下命令生成 `requirements.txt`

  ```
  pipreqs ./ --encoding=utf8
  ```

-----
### 命令行切换到对应 conda 环境
`conda activate xxx`

---
### 命令行自动启动 conda 环境

```shell
# 关闭自动启动conda环境
conda config --set auto_activate_base false
# 启动自动启动conda环境
conda config --set auto_activate_base true
```



---

## `nodejs` 升级

在 `Environments` 中手动升级

---

## npm

### 换源

- [winrey/EasyConnectedInChina: 汇总apt，pip，nodejs等各种工具国内镜像源和设置镜像源的方法 (github.com)](https://github.com/winrey/EasyConnectedInChina#npm)

---

#### 源地址

- 华为源: `https://repo.huaweicloud.com/repository/npm/`

  没有 Azure 相关服务

- 官方源: `https://registry.npmjs.org/`

- 淘宝源: `http://registry.npm.taobao.org/`

  没有 JupyterLab 相关服务

- cnpmjs: `http://r.cnpmjs.org/`

---

#### 临时替换

- 执行 npm 命令时指定 registry 参数即可

  `npm --registry https://registry.npm.taobao.org install express`

----

#### 持久使用

`npm config set registry https://registry.npm.taobao.org`

- 查看更改是否生效

  `npm config get registry`

---

## powershell 7

> [Releases · PowerShell/PowerShell (github.com)](https://github.com/PowerShell/PowerShell/releases)
>
> [在 Windows 上安装 PowerShell - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.2#msi)
>
> [从 Windows PowerShell 5.1 迁移到 PowerShell 7 - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/scripting/whats-new/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.2)

```powershell
# 查看 powershell 版本
$psversiontable
```

PowerShell 7 是专为云、本地和混合环境设计的，它包含增强功能和[新功能](https://docs.microsoft.com/zh-cn/powershell/scripting/whats-new/what-s-new-in-powershell-70?view=powershell-7.2)。

- 与 Windows PowerShell 并行安装和运行
- 提升了与现有 Windows PowerShell 模块的兼容性
- 新语言功能（如三元运算符和 `ForEach-Object -Parallel`）
- 提高了性能
- 基于 SSH 的远程处理
- 跨平台互操作性
- 支持 Docker 容器

PowerShell 7 与 Windows PowerShell 并行运行，可便于你在部署前轻松地测试和比较各个版本。 迁移简单、快捷、安全，

以下 Windows 操作系统支持 PowerShell 7：

- Windows 8.1、10 和 11
- Windows Server 2012、2012 R2、2016 和 2019

PowerShell 7 还在 macOS 和多个 Linux 发行版本上运行。 若要获取受支持操作系统的列表，并了解支持生命周期，请参阅 [PowerShell 支持生命周期](https://docs.microsoft.com/zh-cn/powershell/scripting/install/powershell-support-lifecycle?view=powershell-7.2)。

---

PowerShell 7 默认安装路径为 `C:\Program Files\PowerShell\`



---
# 日常

---

## 浏览器扩展

### [JSON Formatter](https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa/related)

美化 JSON, 测试 api 的时候比较好用

![image-20220429150907866](http://cdn.ayusummer233.top/img/202204291509244.png)

![image-20220429150945870](http://cdn.ayusummer233.top/img/202204291509214.png)

或者也可以直接用 [Apipost-API 文档、调试、Mock、测试一体化协作平台](https://www.apipost.cn/)

![image-20220429152405796](http://cdn.ayusummer233.top/img/202204291524210.png)

---
## Typora

----
### 踩坑

----
#### image load failed
- 自动上传图片后路径转义为:`http://cdn.ayusummer233.top/img/image-20210607155126647.png`无法正常显示, 解决方案为在`http:`后加上`//`

---
#### 无法正常导出PDF
- 导出 PDF 点保存后没有提示也没有导出成功
- `解决方案` : 打开计算机`服务`菜单, `启动 Print Spooler`


----
### LaTeX 相关
- [将Typora伪装成LaTeX的中文样式主题](https://github.com/Keldos-Li/typora-latex-theme)