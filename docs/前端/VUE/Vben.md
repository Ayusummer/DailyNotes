ç›®å½•

- [é¡¹ç›®åœ°å€](#é¡¹ç›®åœ°å€)
- [é¡¹ç›®æ–‡æ¡£](#é¡¹ç›®æ–‡æ¡£)
- [å¼€å§‹](#å¼€å§‹)
  - [ç¯å¢ƒ](#ç¯å¢ƒ)
    - [VSCode æ’ä»¶](#vscode-æ’ä»¶)
  - [npm Script](#npm-script)
  - [ç›®å½•è¯´æ˜](#ç›®å½•è¯´æ˜)
- [é¡¹ç›®é…ç½®](#é¡¹ç›®é…ç½®)
- [é¡¹ç›®è§„èŒƒ](#é¡¹ç›®è§„èŒƒ)
  - [CommitLint](#commitlint)
- [åç«¯è·¯ç”±æ¥å…¥](#åç«¯è·¯ç”±æ¥å…¥)
  - [é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹æƒé™æ¨¡å¼ä¸º BACK](#é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹æƒé™æ¨¡å¼ä¸º-back)
  - [åç«¯æ¥å£è¿”å›è·¯ç”±è¡¨](#åç«¯æ¥å£è¿”å›è·¯ç”±è¡¨)
  - [æ•°æ®åº“ä¿®æ”¹](#æ•°æ®åº“ä¿®æ”¹)
- [æ·±å…¥ç†è§£ä¹‹è·¯ç”±ã€èœå•ã€æƒé™çš„è®¾è®¡](#æ·±å…¥ç†è§£ä¹‹è·¯ç”±èœå•æƒé™çš„è®¾è®¡)
  - [mark](#mark)
  - [é¡¹ç›®åˆå§‹åŒ–](#é¡¹ç›®åˆå§‹åŒ–)
  - [è·¯ç”±é…ç½®](#è·¯ç”±é…ç½®)
  - [ç™»å½•ä¸»ä½“æµç¨‹](#ç™»å½•ä¸»ä½“æµç¨‹)
  - [è·å–ç”¨æˆ·ä¿¡æ¯](#è·å–ç”¨æˆ·ä¿¡æ¯)
  - [ç”Ÿæˆè·¯ç”±](#ç”Ÿæˆè·¯ç”±)
  - [ç”Ÿæˆèœå•](#ç”Ÿæˆèœå•)
  - [è·¯ç”±å®ˆå«](#è·¯ç”±å®ˆå«)
- [ç»„ä»¶](#ç»„ä»¶)
  - [Table](#table)
    - [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
      - [è¡¨æ ¼ç±»å±æ€§è¶…è¿‡é•¿åº¦æ—¶æ¢è¡Œæ˜¾ç¤º](#è¡¨æ ¼ç±»å±æ€§è¶…è¿‡é•¿åº¦æ—¶æ¢è¡Œæ˜¾ç¤º)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜-1)
  - [åŠ è½½ç¼“æ…¢](#åŠ è½½ç¼“æ…¢)
  - [tab é¡µåˆ‡æ¢åé¡µé¢ç©ºç™½](#tab-é¡µåˆ‡æ¢åé¡µé¢ç©ºç™½)
  - [404](#404)
- [ç¾¤å†… QA](#ç¾¤å†…-qa)
- [æºç é˜…è¯»](#æºç é˜…è¯»)
  - [Login ä¸šåŠ¡](#login-ä¸šåŠ¡)
    - [api](#api)
      - [login](#login)
      - [getUserInfo](#getuserinfo)

---

# é¡¹ç›®åœ°å€

[vbenjs/vue-vben-admin: A modern vue admin. It is based on Vue3, vite and TypeScript. It's fastï¼ (github.com)](https://github.com/vbenjs/vue-vben-admin)

[vbenjs/vben-admin-thin-next: vue-vben-admin-2.0 mini template.vue3,vite,typescript (github.com)](https://github.com/vbenjs/vben-admin-thin-next)

[vbenjs/vue-vben-admin-doc: vue-vben-admin-doc (github.com)](https://github.com/vbenjs/vue-vben-admin-doc)

---

# é¡¹ç›®æ–‡æ¡£

> [Home | Vben Admin (vvbin.cn)](https://vvbin.cn/doc-next/)
>
> [æ„å»º&éƒ¨ç½² | Vben Admin (vvbin.cn)](https://vvbin.cn/doc-next/guide/deploy.html)

---

# å¼€å§‹

## ç¯å¢ƒ

`Pnpm(6.32.4)` + `Node.js(16.14.2)` + `Git(2.36.0.windows.1)`

---

### VSCode æ’ä»¶

- [Iconify IntelliSense](https://marketplace.visualstudio.com/items?itemName=antfu.iconify) - Iconify å›¾æ ‡æ’ä»¶

- [windicss IntelliSense](https://marketplace.visualstudio.com/items?itemName=voorjaar.windicss-intellisense) - windicss æç¤ºæ’ä»¶

- [I18n-ally](https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally) - i18n æ’ä»¶

- [Volar](https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.volar) - å®˜æ–¹æ¨è Vue3 æ’ä»¶

- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) - è„šæœ¬ä»£ç æ£€æŸ¥

- [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) - ä»£ç æ ¼å¼åŒ–

- [Stylelint](https://marketplace.visualstudio.com/items?itemName=stylelint.vscode-stylelint) - css æ ¼å¼åŒ–

- [DotENV](https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv) - .env æ–‡ä»¶ é«˜äº®

- [Color Highlight](https://marketplace.visualstudio.com/items?itemName=naumovs.color-highlight) - é¢œè‰²ä»£ç é«˜äº®æ˜¾ç¤º

  ![image-20220423115459335](http://cdn.ayusummer233.top/img/202204231155705.png)

---

## npm Script

```sh
"scripts": {
  # å®‰è£…ä¾èµ–
  "bootstrap": "yarn install",
  # è¿è¡Œé¡¹ç›®
  "serve": "npm run dev",
  # è¿è¡Œé¡¹ç›®
  "dev": "vite",
  # æ„å»ºé¡¹ç›®
  "build": "vite build && esno ./build/script/postBuild.ts",
  # æ¸…ç©ºç¼“å­˜åæ„å»ºé¡¹ç›®
  "build:no-cache": "yarn clean:cache && npm run build",
  # ç”Ÿæˆæ‰“åŒ…åˆ†æï¼Œåœ¨ `Mac OS` ç”µè„‘ä¸Šæ‰§è¡Œå®Œæˆåä¼šè‡ªåŠ¨æ‰“å¼€ç•Œé¢ï¼Œåœ¨ `Window` ç”µè„‘ä¸Šæ‰§è¡Œå®Œæˆåéœ€è¦æ‰“å¼€ `./build/.cache/stats.html` æŸ¥çœ‹
  "report": "cross-env REPORT=true npm run build",
  # ç±»å‹æ£€æŸ¥
  "type:check": "vue-tsc --noEmit --skipLibCheck",
  # é¢„è§ˆæ‰“åŒ…åçš„å†…å®¹ï¼ˆå…ˆæ‰“åŒ…åœ¨è¿›è¡Œé¢„è§ˆï¼‰
  "preview": "npm run build && vite preview",
  # ç›´æ¥é¢„è§ˆæœ¬åœ° dist æ–‡ä»¶ç›®å½•
  "preview:dist": "vite preview",
  # ç”Ÿæˆ ChangeLog
  "log": "conventional-changelog -p angular -i CHANGELOG.md -s",
  # åˆ é™¤ç¼“å­˜
  "clean:cache": "rimraf node_modules/.cache/ && rimraf node_modules/.vite",
  # åˆ é™¤ node_modules (`window` ç³»ç»Ÿæ‰‹åŠ¨åˆ é™¤è¯¥ç›®å½•è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤æ¥è¿›è¡Œåˆ é™¤)
  "clean:lib": "rimraf node_modules",
  # æ‰§è¡Œ eslint æ ¡éªŒï¼Œå¹¶ä¿®å¤éƒ¨åˆ†é—®é¢˜
  "lint:eslint": "eslint \"{src,mock}/**/*.{vue,ts,tsx}\" --fix",
  # æ‰§è¡Œ prettier æ ¼å¼åŒ–ï¼ˆè¯¥å‘½ä»¤ä¼šå¯¹é¡¹ç›®æ‰€æœ‰ä»£ç è¿›è¡Œ prettier æ ¼å¼åŒ–ï¼Œè¯·è°¨æ…æ‰§è¡Œï¼‰
  "lint:prettier": "prettier --write --loglevel warn \"src/**/*.{js,json,tsx,css,less,scss,vue,html,md}\"",
  # æ‰§è¡Œ stylelint æ ¼å¼åŒ–
  "lint:stylelint": "stylelint --fix \"**/*.{vue,less,postcss,css,scss}\" --cache --cache-location node_modules/.cache/stylelint/",
  "lint:lint-staged": "lint-staged -c ./.husky/lintstagedrc.js",
  "lint:pretty": "pretty-quick --staged",
  # å¯¹æ‰“åŒ…ç»“æœè¿›è¡Œ gzip æµ‹è¯•
  "test:gzip": "http-server dist --cors --gzip -c-1",
  # å¯¹æ‰“åŒ…ç›®å½•è¿›è¡Œ brotli æµ‹è¯•
  "test:br": "http-server dist --cors --brotli -c-1",
  # é‡æ–°å®‰è£…ä¾èµ–ï¼Œè§ä¸‹æ–¹è¯´æ˜
  "reinstall": "rimraf yarn.lock && rimraf package.lock.json && rimraf node_modules && npm run bootstrap",
  "install:husky": "is-ci || husky install",
  # ç”Ÿæˆå›¾æ ‡é›†ï¼Œè§ä¸‹æ–¹è¯´æ˜
  "gen:icon": "esno ./build/generate/icon/index.ts",
  "postinstall": "npm run install:husky"
}
```

- `ç”Ÿæˆå›¾æ ‡é›†`: è¯¥å‘½ä»¤ä¼šç”Ÿæˆæ‰€é€‰æ‹©çš„å›¾æ ‡é›†ï¼Œæä¾›ç»™å›¾æ ‡é€‰æ‹©å™¨ä½¿ç”¨ã€‚å…·ä½“ä½¿ç”¨æ–¹å¼è¯·æŸ¥çœ‹ [å›¾æ ‡é›†ç”Ÿæˆ](https://vvbin.cn/doc-next/dep/icon.html#å›¾æ ‡é›†é¢„ç”Ÿæˆ)

- `é‡æ–°å®‰è£…ä¾èµ–`: 

  è¯¥å‘½ä»¤ä¼šå…ˆåˆ é™¤ `node_modules`ã€`yarn.lock`ã€`package.lock.json` åå†è¿›è¡Œä¾èµ–é‡æ–°å®‰è£…ï¼ˆå®‰è£…é€Ÿåº¦ä¼šæ˜æ˜¾å˜æ…¢ï¼‰ã€‚

  æ¥ä¸‹æ¥ä½ å¯ä»¥ä¿®æ”¹ä»£ç è¿›è¡Œä¸šåŠ¡å¼€å‘äº†ã€‚æˆ‘ä»¬å†…å»ºäº†æ¨¡æ‹Ÿæ•°æ®ã€HMR å®æ—¶é¢„è§ˆã€çŠ¶æ€ç®¡ç†ã€å›½é™…åŒ–ã€å…¨å±€è·¯ç”±ç­‰å„ç§å®ç”¨çš„åŠŸèƒ½è¾…åŠ©å¼€å‘ï¼Œè¯·é˜…è¯»å…¶ä»–ç« èŠ‚äº†è§£æ›´å¤šã€‚

---

## ç›®å½•è¯´æ˜

```sh
.
â”œâ”€â”€ build # æ‰“åŒ…è„šæœ¬ç›¸å…³
â”‚   â”œâ”€â”€ config # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ generate # ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ script # è„šæœ¬
â”‚   â””â”€â”€ vite # viteé…ç½®
â”œâ”€â”€ mock # mockæ–‡ä»¶å¤¹
â”œâ”€â”€ public # å…¬å…±é™æ€èµ„æºç›®å½•
â”œâ”€â”€ src # ä¸»ç›®å½•
â”‚   â”œâ”€â”€ api # æ¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ assets # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ icons # icon sprite å›¾æ ‡æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ images # é¡¹ç›®å­˜æ”¾å›¾ç‰‡çš„æ–‡ä»¶å¤¹
â”‚   â”‚   â””â”€â”€ svg # é¡¹ç›®å­˜æ”¾svgå›¾ç‰‡çš„æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ components # å…¬å…±ç»„ä»¶-åŒ…æ‹¬vbenå¯¹antdçš„ä¸€äº›ç»„ä»¶çš„é‡æ–°å°è£…ä»¥åŠè‡ªå®šä¹‰çš„å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ design # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ directives # æŒ‡ä»¤
â”‚   â”œâ”€â”€ enums # æšä¸¾/å¸¸é‡(ä¸€èˆ¬ä¸ä¼šå»æ”¹åŠ¨)
â”‚   â”œâ”€â”€ hooks # hook
â”‚   â”‚   â”œâ”€â”€ component # ç»„ä»¶ç›¸å…³hook
â”‚   â”‚   â”œâ”€â”€ core # åŸºç¡€hook
â”‚   â”‚   â”œâ”€â”€ event # äº‹ä»¶ç›¸å…³hook
â”‚   â”‚   â”œâ”€â”€ setting # é…ç½®ç›¸å…³hook
â”‚   â”‚   â””â”€â”€ web # webç›¸å…³hook
â”‚   â”œâ”€â”€ layouts # å¸ƒå±€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ default # é»˜è®¤å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ iframe # iframeå¸ƒå±€
â”‚   â”‚   â””â”€â”€ page # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ locales # å¤šè¯­è¨€
â”‚   â”œâ”€â”€ logics # é€»è¾‘
â”‚   â”œâ”€â”€ main.ts # ä¸»å…¥å£
â”‚   â”œâ”€â”€ router # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ settings # é¡¹ç›®é…ç½®
â”‚   â”‚   â”œâ”€â”€ componentSetting.ts # ç»„ä»¶é…ç½®
â”‚   â”‚   â”œâ”€â”€ designSetting.ts # æ ·å¼é…ç½®
â”‚   â”‚   â”œâ”€â”€ encryptionSetting.ts # åŠ å¯†é…ç½®
â”‚   â”‚   â”œâ”€â”€ localeSetting.ts # å¤šè¯­è¨€é…ç½®
â”‚   â”‚   â”œâ”€â”€ projectSetting.ts # é¡¹ç›®é…ç½®
â”‚   â”‚   â””â”€â”€ siteSetting.ts # ç«™ç‚¹é…ç½®
â”‚   â”œâ”€â”€ store # æ•°æ®ä»“åº“
â”‚   â”œâ”€â”€ utils # å·¥å…·ç±»
â”‚   â””â”€â”€ views # é¡µé¢
â”œâ”€â”€ test # æµ‹è¯•
â”‚   â””â”€â”€ server # æµ‹è¯•ç”¨åˆ°çš„æœåŠ¡
â”‚       â”œâ”€â”€ api # æµ‹è¯•æœåŠ¡å™¨
â”‚       â”œâ”€â”€ upload # æµ‹è¯•ä¸Šä¼ æœåŠ¡å™¨
â”‚       â””â”€â”€ websocket # æµ‹è¯•wsæœåŠ¡å™¨
â”œâ”€â”€ types # ç±»å‹æ–‡ä»¶
â”œâ”€â”€ vite.config.ts # viteé…ç½®æ–‡ä»¶
â””â”€â”€ windi.config.ts # windcssé…ç½®æ–‡ä»¶
```

---

# é¡¹ç›®é…ç½®

ç”¨äºä¿®æ”¹é¡¹ç›®çš„é…è‰²ã€å¸ƒå±€ã€ç¼“å­˜ã€å¤šè¯­è¨€ã€ç»„ä»¶é»˜è®¤é…ç½®

---

# é¡¹ç›®è§„èŒƒ

> [Lint | Vben Admin (vvbin.cn)](https://vvbin.cn/doc-next/dep/lint.html)

---

## CommitLint

commit-lint çš„é…ç½®ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹ `commitlint.config.js`

![image-20220503143453435](http://cdn.ayusummer233.top/img/202205031434826.png)



---

# åç«¯è·¯ç”±æ¥å…¥

## é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹æƒé™æ¨¡å¼ä¸º BACK

[src/settings/projectSetting.ts](https://github.com/vbenjs/vue-vben-admin/tree/main/src/settings/projectSetting.ts)

å°†ç³»ç»Ÿå†…æƒé™æ¨¡å¼æ”¹ä¸º `BACK` æ¨¡å¼å¼€å¯æƒé™ç”±åå°åŠ¨æ€è·å–

![image-20220503073803911](http://cdn.ayusummer233.top/img/202205030738082.png)

> åå°è¿”å›è§’è‰², å‰ç«¯æ ¹æ®è¿”å›ç»“æœæ˜¾ç¤ºç•Œé¢ç­‰

é…ç½®æ”¹å®Œåè¦æ¸…ç¼“å­˜:

![image-20220503071625298](http://cdn.ayusummer233.top/img/202205030716480.png)

æœ€åŸºæœ¬çš„é™æ€è·¯ç”±å­˜æ”¾åœ¨ `src/router/routes/index.ts` ä¸­, åŒ…å«æ ¹è·¯ç”±ä»¥åŠç™»å½•é¡µé¢

![image-20220503071246721](http://cdn.ayusummer233.top/img/202205030712969.png)

åŸæœ¬å‰ç«¯è·¯ç”±æƒ…å†µä¸‹ç™»å…¥æ“ä½œçš„è¯·æ±‚åŠå“åº”å¦‚ä¸‹:

![image-20220503073244809](http://cdn.ayusummer233.top/img/202205030732941.png)

![image-20220503074215472](http://cdn.ayusummer233.top/img/202205030742550.png)

----

## åç«¯æ¥å£è¿”å›è·¯ç”±è¡¨

---

åˆ‡æ¢åç«¯è·¯ç”±åç™»å½•æ“ä½œè¯·æ±‚èµ„æºå¦‚ä¸‹:

![image-20220503074342187](http://cdn.ayusummer233.top/img/202205030743271.png)

---

`login`:

![image-20220503074514748](http://cdn.ayusummer233.top/img/202205030745837.png)

![image-20220503074552655](http://cdn.ayusummer233.top/img/202205030745723.png)

![image-20220503074450395](http://cdn.ayusummer233.top/img/202205030744462.png)

---

`getUserInfo`:

![image-20220503074657195](http://cdn.ayusummer233.top/img/202205030746282.png)

![image-20220503074711295](http://cdn.ayusummer233.top/img/202205030747383.png)

---

ç™»é™†æˆåŠŸè·å– `æƒé™ç (PermCode`, `èœå•(MenuList)`

`getPermCode`:

![image-20220503074845976](http://cdn.ayusummer233.top/img/202205030748072.png)

![image-20220503074857618](http://cdn.ayusummer233.top/img/202205030748697.png)

---

`getMenuList`:

![image-20220503074940111](http://cdn.ayusummer233.top/img/202205030749194.png)

![image-20220503075017643](http://cdn.ayusummer233.top/img/202205030750750.png)

---

ä»¥åŠä¸€ä¸ªå›¾æ ‡è¯·æ±‚:

![image-20220503075123487](http://cdn.ayusummer233.top/img/202205030751576.png)

![image-20220503075133396](http://cdn.ayusummer233.top/img/202205030751456.png)

![image-20220503075147948](http://cdn.ayusummer233.top/img/202205030751031.png)

> ä¸è¿‡è¿™ä¸ªè¯·æ±‚æ˜æ˜¾æ˜¯å‘å¾€ç«™å¤–çš„, å°±ä¸ç”¨å†™äº†

---

é‡ç‚¹è¯´è¯´ `MenuList`:


![image-20220503074940111](http://cdn.ayusummer233.top/img/202205030749194.png)

![image-20220503075017643](http://cdn.ayusummer233.top/img/202205030750750.png)

![image-20220503075834271](http://cdn.ayusummer233.top/img/202205030758420.png)

![image-20220503081228333](http://cdn.ayusummer233.top/img/202205030812505.png)

---

åœ¨ `.env.development` ä¸­å…³æ‰ `mock` åå†åˆ é™¤ç¼“å­˜æ”¾å›ç™»å½•é¡µé¢ç™»å½•, é‚£ä¹ˆå°±ä¼š

![](http://cdn.ayusummer233.top/img/202205030838782.png)

è¿™ä¸ªè¯·æ±‚åœ°å€å’Œä¹‹å‰ä¸€è‡´, é‚£ä¹ˆå¯ä»¥ä¿ç•™ mock, ç„¶åç”¨è½¬å‘æ…¢æ…¢è”è°ƒ(

## æ•°æ®åº“ä¿®æ”¹

åœ¨æ•°æ®åº“ä¸­æ–°å»ºä¸€ä¸ª `router` è¡¨

å­—æ®µæ ¹æ®ä¸Šé¢çš„ `menuList` è®¾ç½®:

![image-20220503082151720](http://cdn.ayusummer233.top/img/202205030821797.png)



![image-20220503082207631](http://cdn.ayusummer233.top/img/202205030822719.png)

> åç»­å†…å®¹æœªå®Œæˆ, go æ¥è§¦çš„ä¸å¤šä¸”å½“å‰æ—¶é—´æ¯”è¾ƒç´§, æ‰“ç®—è‡ªå·±å—¯ç”¨ FastAPI æ“

---

# æ·±å…¥ç†è§£ä¹‹è·¯ç”±ã€èœå•ã€æƒé™çš„è®¾è®¡

> [Vben Admin æ·±å…¥ç†è§£ä¹‹è·¯ç”±ã€èœå•ã€æƒé™çš„è®¾è®¡ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7001851383607459848)

## mark

- è·¯ç”±æ˜¯æ€ä¹ˆè‡ªåŠ¨åŠ è½½å¹¶ç”Ÿæˆèœå•çš„ï¼Ÿ
- èœå•æƒé™æ¨¡å¼åˆ†åˆ«æœ‰ä»€ä¹ˆä¸åŒï¼Œæ€ä¹ˆåšçš„åŒºåˆ†å’Œå¤„ç†ï¼Ÿ
- æƒé™çš„è®¤è¯æµç¨‹å’Œåˆå§‹åŒ–æ˜¯æ€ä¹ˆå®Œæˆçš„ï¼Ÿ

---

## é¡¹ç›®åˆå§‹åŒ–

`src/main.ts`

```typescript
async function bootstrap() {
  const app = createApp(App);

  // Configure store
  // ä½¿ç”¨ pinia
  setupStore(app);

  // Initialize internal system configuration
  // åˆå§‹åŒ–ç³»ç»Ÿé…ç½®: é¡¹ç›®é…ç½®, æ ·å¼ä¸»é¢˜, æŒä¹…åŒ–ç¼“å­˜ç­‰
  initAppConfigStore();

  // Register global components
  // æ³¨å†Œå…¨å±€ç»„ä»¶
  registerGlobComp(app);

  // Multilingual configuration
  // Asynchronous case: language files may be obtained from the server side
  // å¤šè¯­è¨€é…ç½®(å›½é™…åŒ–é…ç½®)
  await setupI18n(app);

  // Configure routing
  // è·¯ç”±é…ç½®
  setupRouter(app);

  // router-guard
  // è·¯ç”±å®ˆå«: æƒé™åˆ¤æ–­, åˆå§‹åŒ–ç¼“å­˜æ•°æ®ç­‰
  setupRouterGuard(router);

  // Register global directive
  // æ³¨å†Œå…¨å±€æŒ‡ä»¤
  setupGlobDirectives(app);

  // Configure global error handling
  // é…ç½®å…¨å±€é”™è¯¯å¤„ç†
  setupErrorHandle(app);

  // https://next.router.vuejs.org/api/#isready
  // await router.isReady();

  app.mount('#app');
}
```

---

## è·¯ç”±é…ç½®

å®ç°è‡ªåŠ¨åŠ è½½ `modules` ä¸‹çš„è·¯ç”±æ–‡ä»¶å¹¶ç”Ÿæˆè·¯ç”±é…ç½®ä¿¡æ¯å’Œä¸€äº›é€šç”¨çš„é…ç½®ã€‚

`src/router/routes/index.ts`:

```typescript
import type { AppRouteRecordRaw, AppRouteModule } from '/@/router/types';

import { PAGE_NOT_FOUND_ROUTE, REDIRECT_ROUTE } from '/@/router/routes/basic';

import { mainOutRoutes } from './mainOut';
import { PageEnum } from '/@/enums/pageEnum';
import { t } from '/@/hooks/web/useI18n';

// è‡ªåŠ¨åŠ è½½ ./modules ç›®å½•ä¸‹çš„è·¯ç”±æ¨¡å—
const modules = import.meta.globEager('./modules/**/*.ts');

const routeModuleList: AppRouteModule[] = [];

Object.keys(modules).forEach((key) => {
  const mod = modules[key].default || {};
  const modList = Array.isArray(mod) ? [...mod] : [mod];
  routeModuleList.push(...modList);
});

// è¯»å–çš„è·¯ç”±å¹¶æœªç«‹å³æ³¨å†Œï¼Œè€Œæ˜¯ç­‰æƒé™è®¤è¯å®Œåé€šè¿‡ router.addRoutes æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼Œå®ç°æƒé™çš„è¿‡æ»¤
export const asyncRoutes = [PAGE_NOT_FOUND_ROUTE, ...routeModuleList];

export const RootRoute: AppRouteRecordRaw = {
  path: '/',
  name: 'Root',
  redirect: PageEnum.BASE_HOME,
  meta: {
    title: 'Root',
  },
};

export const LoginRoute: AppRouteRecordRaw = {
  path: '/login',
  name: 'Login',
  component: () => import('/@/views/sys/login/Login.vue'),
  meta: {
    title: t('routes.basic.login'),
  },
};

// Basic routing without permission
export const basicRoutes = [
  // ç™»å½•è·¯ç”±
  LoginRoute,
  // è·Ÿè·¯ç”±
  RootRoute,
  // æ–°é¡µé¢ /main-out
  ...mainOutRoutes,
  // é‡å®šå‘è·¯ç”±
  REDIRECT_ROUTE,
  // 404
  PAGE_NOT_FOUND_ROUTE,
];

```

---

## ç™»å½•ä¸»ä½“æµç¨‹

ç‚¹å‡»ç™»å½•è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå­˜å‚¨ä½¿ç”¨çš„ `pinia` å®ç°ã€‚

`src\views\sys\login\LoginForm.vue`:

```typescript
// è·å–ç”¨æˆ·ä¿¡æ¯, å­˜å‚¨ä½¿ç”¨ pinia
const userInfo = await userStore.login({
  password: data.password,
  username: data.account,
  mode: 'none', //ä¸è¦é»˜è®¤çš„é”™è¯¯æç¤º
});
```

`src\store\modules\user.ts`:

```typescript
    /**
     * @description: login
     */
    async login(
      params: LoginParams & {
        goHome?: boolean;
        mode?: ErrorMessageMode;
      },
    ): Promise<GetUserInfoModel | null> {
      try {
        const { goHome = true, mode, ...loginParams } = params;
        // 1. è°ƒç”¨ç™»å½•æ¥å£
        const data = await loginApi(loginParams, mode);
        const { token } = data;

        // save token
        // 2. è®¾ç½® token å¹¶å­˜å‚¨æœ¬åœ°ç¼“å­˜
        this.setToken(token);
        return this.afterLoginAction(goHome);
      } catch (error) {
        return Promise.reject(error);
      }
    },
    async afterLoginAction(goHome?: boolean): Promise<GetUserInfoModel | null> {
      if (!this.getToken) return null;
      // get user info
      // 3. è·å–ç”¨æˆ·ä¿¡æ¯
      const userInfo = await this.getUserInfoAction();

      const sessionTimeout = this.sessionTimeout;
      if (sessionTimeout) {
        this.setSessionTimeout(false);
      } else {
        const permissionStore = usePermissionStore();
        if (!permissionStore.isDynamicAddedRoute) {
          // 4. è·å–è·¯ç”±é…ç½®å¹¶åŠ¨æ€æ·»åŠ è·¯ç”±é…ç½®
          const routes = await permissionStore.buildRoutesAction();
          routes.forEach((route) => {
            router.addRoute(route as unknown as RouteRecordRaw);
          });
          router.addRoute(PAGE_NOT_FOUND_ROUTE as unknown as RouteRecordRaw);
          permissionStore.setDynamicAddedRoute(true);
        }
        goHome && (await router.replace(userInfo?.homePath || PageEnum.BASE_HOME));
      }
      return userInfo;
    },
    async getUserInfoAction(): Promise<UserInfo | null> {
      if (!this.getToken) return null;
      const userInfo = await getUserInfo();
      const { roles = [] } = userInfo;
      if (isArray(roles)) {
        const roleList = roles.map((item) => item.value) as RoleEnum[];
        this.setRoleList(roleList);
      } else {
        userInfo.roles = [];
        this.setRoleList([]);
      }
      this.setUserInfo(userInfo);
      return userInfo;
    },
```

---

## è·å–ç”¨æˆ·ä¿¡æ¯

`src\store\modules\user.ts`:

```typescript
    async getUserInfoAction(): Promise<UserInfo | null> {
      if (!this.getToken) return null;
      const userInfo = await getUserInfo();
      const { roles = [] } = userInfo;
      if (isArray(roles)) {
        const roleList = roles.map((item) => item.value) as RoleEnum[];
        // è®¾ç½®æƒé™åˆ—è¡¨, å¹¶å­˜å‚¨æœ¬åœ°ç¼“å­˜
        this.setRoleList(roleList);
      } else {
        userInfo.roles = [];
        this.setRoleList([]);
      }
      // è®¾ç½®ç”¨æˆ·ä¿¡æ¯, å¹¶å­˜å‚¨æœ¬åœ°ç¼“å­˜
      this.setUserInfo(userInfo);
      return userInfo;
    },
```

---

## ç”Ÿæˆè·¯ç”±

ç™»å½•æˆåŠŸä¹‹åè°ƒç”¨ `buildRoutesAction` è·å–è·¯ç”±é…ç½®ã€ç”Ÿæˆèœå•é…ç½®ã€‚

`src\store\modules\permission.ts\userPermissionStore/actions/buildRoutesAction()`:

```typescript
    async buildRoutesAction(): Promise<AppRouteRecordRaw[]> {
      const { t } = useI18n();
      const userStore = useUserStore();
      const appStore = useAppStoreWithOut();

      let routes: AppRouteRecordRaw[] = [];
      const roleList = toRaw(userStore.getRoleList) || [];
      // è·å–æƒé™æ¨¡å¼
      const { permissionMode = projectSetting.permissionMode } = appStore.getProjectConfig;

      const routeFilter = (route: AppRouteRecordRaw) => {
        const { meta } = route;
        const { roles } = meta || {};
        if (!roles) return true;
        return roleList.some((role) => roles.includes(role));
      };

      const routeRemoveIgnoreFilter = (route: AppRouteRecordRaw) => {
        const { meta } = route;
        const { ignoreRoute } = meta || {};
        return !ignoreRoute;
      };

      /**
       * @description æ ¹æ®è®¾ç½®çš„é¦–é¡µpathï¼Œä¿®æ­£routesä¸­çš„affixæ ‡è®°ï¼ˆå›ºå®šé¦–é¡µï¼‰
       * */
      const patchHomeAffix = (routes: AppRouteRecordRaw[]) => {
        if (!routes || routes.length === 0) return;
        let homePath: string = userStore.getUserInfo.homePath || PageEnum.BASE_HOME;
        function patcher(routes: AppRouteRecordRaw[], parentPath = '') {
          if (parentPath) parentPath = parentPath + '/';
          routes.forEach((route: AppRouteRecordRaw) => {
            const { path, children, redirect } = route;
            const currentPath = path.startsWith('/') ? path : parentPath + path;
            if (currentPath === homePath) {
              if (redirect) {
                homePath = route.redirect! as string;
              } else {
                route.meta = Object.assign({}, route.meta, { affix: true });
                throw new Error('end');
              }
            }
            children && children.length > 0 && patcher(children, currentPath);
          });
        }
        try {
          patcher(routes);
        } catch (e) {
          // å·²å¤„ç†å®Œæ¯•è·³å‡ºå¾ªç¯
        }
        return;
      };
      // åŒºåˆ†æƒé™æ¨¡å¼
      switch (permissionMode) {
        // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•å’Œè·¯ç”±åˆ†å¼€é…ç½®)
        case PermissionModeEnum.ROLE:
          // æ ¹æ®æƒé™è¿‡æ»¤è·¯ç”±
          routes = filter(asyncRoutes, routeFilter);
          routes = routes.filter(routeFilter);
          // Convert multi-level routing to level 2 routing
          // å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±
          routes = flatMultiLevelRoutes(routes);
          break;

        // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•å’Œè·¯ç”±é…ç½®è‡ªåŠ¨ç”Ÿæˆ)
        case PermissionModeEnum.ROUTE_MAPPING:
          // æ ¹æ®æƒé™è¿‡æ»¤è·¯ç”±
          routes = filter(asyncRoutes, routeFilter);
          routes = routes.filter(routeFilter);
          // é€šè¿‡è½¬æ¢è·¯ç”±ç”Ÿæˆèœå•
          const menuList = transformRouteToMenu(routes, true);
          routes = filter(routes, routeRemoveIgnoreFilter);
          routes = routes.filter(routeRemoveIgnoreFilter);
          menuList.sort((a, b) => {
            return (a.meta?.orderNo || 0) - (b.meta?.orderNo || 0);
          });

          // è®¾ç½®ä¿å­˜èœå•åˆ—è¡¨
          this.setFrontMenuList(menuList);
          // Convert multi-level routing to level 2 routing
          // å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±
          routes = flatMultiLevelRoutes(routes);
          break;

        //  If you are sure that you do not need to do background dynamic permissions, please comment the entire judgment below
        // åå°æ–¹å¼æ§åˆ¶
        case PermissionModeEnum.BACK:
          const { createMessage } = useMessage();

          createMessage.loading({
            content: t('sys.app.menuLoading'),
            duration: 1,
          });

          // !Simulate to obtain permission codes from the background,
          // this function may only need to be executed once, and the actual project can be put at the right time by itself
          // è·å–åå°è¿”å›çš„èœå•é…ç½® /mock/sys/menu.ts
          let routeList: AppRouteRecordRaw[] = [];
          try {
            this.changePermissionCode();
            routeList = (await getMenuList()) as AppRouteRecordRaw[];
          } catch (error) {
            console.error(error);
          }

          // Dynamically introduce components
          routeList = transformObjToRoute(routeList);

          //  Background routing to menu structure
          // é€šè¿‡è½¬æ¢è·¯ç”±ç”Ÿæˆèœå•
          const backMenuList = transformRouteToMenu(routeList);
          // è®¾ç½®èœå•åˆ—è¡¨
          this.setBackMenuList(backMenuList);

          // remove meta.ignoreRoute item
          routeList = filter(routeList, routeRemoveIgnoreFilter);
          routeList = routeList.filter(routeRemoveIgnoreFilter);

          // è®¾ç½®ä¿å­˜èœå•åˆ—è¡¨
          routeList = flatMultiLevelRoutes(routeList);
          routes = [PAGE_NOT_FOUND_ROUTE, ...routeList];
          break;
      }

      routes.push(ERROR_LOG_ROUTE);
      patchHomeAffix(routes);
      return routes;
    },
```

---

## ç”Ÿæˆèœå•

æ ¹æ®ä¸åŒçš„æƒé™æ¨¡å¼ä»ä¸åŒçš„æ•°æ®æºè·å–èœå•ã€‚

`src\router\menus\index.ts`:

```typescript
// è‡ªåŠ¨åŠ è½½ `modules` ç›®å½•ä¸‹çš„èœå•æ¨¡å—
const modules = import.meta.globEager('./modules/**/*.ts');

async function getAsyncMenus() {
  const permissionStore = usePermissionStore();
  // åç«¯æ¨¡å¼ BACK
  if (isBackMode()) {
    // è·å– this.setBackMenuList(menuList) è®¾ç½®çš„èœå•
    return permissionStore.getBackMenuList.filter((item) => !item.meta?.hideMenu && !item.hideMenu);
  }
  // å‰ç«¯æ¨¡å¼(èœå•ç”±è·¯ç”±é…ç½®è‡ªåŠ¨ç”Ÿæˆ) ROUTE_MAPPING
  if (isRouteMappingMode()) {
    // è·å– this.setFrontMenuList(menuList) è®¾ç½®çš„èœå•
    return permissionStore.getFrontMenuList.filter((item) => !item.hideMenu);
  }
  // å‰ç«¯æ¨¡å¼(èœå•å’Œè·¯ç”±åˆ†å¼€é…ç½®) ROLE
  return staticMenus;
}
```

åœ¨èœå•ç»„ä»¶ä¸­è·å–èœå•é…ç½®æ¸²æŸ“ã€‚

`src\layouts\default\menu\index.vue\scrupt\default\setup\renderMenu()`:

```typescript
      // åœ¨èœå•ç»„ä»¶ä¸­è·å–èœå•é…ç½®æ¸²æŸ“
      function renderMenu() {
        const { menus, ...menuProps } = unref(getCommonProps);
        // console.log(menus);
        if (!menus || !menus.length) return null;
        return !props.isHorizontal ? (
          <SimpleMenu {...menuProps} isSplitMenu={unref(getSplit)} items={menus} />
        ) : (
          <BasicMenu
            {...(menuProps as any)}
            isHorizontal={props.isHorizontal}
            type={unref(getMenuType)}
            showLogo={unref(getIsShowLogo)}
            mode={unref(getComputedMenuMode as any)}
            items={menus}
          />
        );
      }
```

---

## è·¯ç”±å®ˆå«

åˆ¤æ–­æ˜¯å¦ç™»å½•ä»¥åŠåˆ·æ–°ä¹‹åçš„åˆå§‹åŒ–ã€‚

`src\router\guard\permissionGuard.ts`:

```typescript

export function createPermissionGuard(router: Router) {
  const userStore = useUserStoreWithOut();
  const permissionStore = usePermissionStoreWithOut();
  router.beforeEach(async (to, from, next) => {
    if (
      from.path === ROOT_PATH &&
      to.path === PageEnum.BASE_HOME &&
      userStore.getUserInfo.homePath &&
      userStore.getUserInfo.homePath !== PageEnum.BASE_HOME
    ) {
      next(userStore.getUserInfo.homePath);
      return;
    }

    const token = userStore.getToken;

    // Whitelist can be directly entered
    // ç™½åå•å¯ä»¥ç›´æ¥è¿›å…¥
    if (whitePathList.includes(to.path as PageEnum)) {
      if (to.path === LOGIN_PATH && token) {
        const isSessionTimeout = userStore.getSessionTimeout;
        try {
          await userStore.afterLoginAction();
          if (!isSessionTimeout) {
            next((to.query?.redirect as string) || '/');
            return;
          }
        } catch {}
      }
      next();
      return;
    }

    // token does not exist
    // tokenä¸å­˜åœ¨åˆ™é‡å®šå‘åˆ°ç™»å½•é¡µ
    if (!token) {
      // You can access without permission. You need to set the routing meta.ignoreAuth to true
      if (to.meta.ignoreAuth) {
        next();
        return;
      }

      // redirect login page
      const redirectData: { path: string; replace: boolean; query?: Recordable<string> } = {
        path: LOGIN_PATH,
        replace: true,
      };
      if (to.path) {
        redirectData.query = {
          ...redirectData.query,
          redirect: to.path,
        };
      }
      next(redirectData);
      return;
    }

    // Jump to the 404 page after processing the login
    // å¤„ç†ç™»å½•åè·³è½¬åˆ° 404 é¡µé¢
    if (
      from.path === LOGIN_PATH &&
      to.name === PAGE_NOT_FOUND_ROUTE.name &&
      to.fullPath !== (userStore.getUserInfo.homePath || PageEnum.BASE_HOME)
    ) {
      next(userStore.getUserInfo.homePath || PageEnum.BASE_HOME);
      return;
    }

    // get userinfo while last fetch time is empty
    // è·å–ç”¨æˆ·ä¿¡æ¯ userinfo / roleList
    if (userStore.getLastUpdateTime === 0) {
      try {
        await userStore.getUserInfoAction();
      } catch (err) {
        next();
        return;
      }
    }

    // æ ¹æ®åˆ¤æ–­æ˜¯å¦é‡æ–°è·å–åŠ¨æ€è·¯ç”±
    if (permissionStore.getIsDynamicAddedRoute) {
      next();
      return;
    }

    const routes = await permissionStore.buildRoutesAction();

    routes.forEach((route) => {
      router.addRoute(route as unknown as RouteRecordRaw);
    });

    router.addRoute(PAGE_NOT_FOUND_ROUTE as unknown as RouteRecordRaw);

    permissionStore.setDynamicAddedRoute(true);

    if (to.name === PAGE_NOT_FOUND_ROUTE.name) {
      // åŠ¨æ€æ·»åŠ è·¯ç”±åï¼Œæ­¤å¤„åº”å½“é‡å®šå‘åˆ°fullPathï¼Œå¦åˆ™ä¼šåŠ è½½404é¡µé¢å†…å®¹
      next({ path: to.fullPath, replace: true, query: to.query });
    } else {
      const redirectPath = (from.query.redirect || to.path) as string;
      const redirect = decodeURIComponent(redirectPath);
      const nextData = to.path === redirect ? { ...to, replace: true } : { path: redirect };
      next(nextData);
    }
  });
}

```

---
# ç»„ä»¶

---

## Table

### å¸¸è§é—®é¢˜

#### è¡¨æ ¼ç±»å±æ€§è¶…è¿‡é•¿åº¦æ—¶æ¢è¡Œæ˜¾ç¤º

è®¾ç½® `useTable` çš„ `ellipsis` å±æ€§ä¸º `false` å³å¯:

![image-20220513194050415](http://cdn.ayusummer233.top/img/202205131940818.png)

![image-20220513194206793](http://cdn.ayusummer233.top/img/202205131942021.png)



---

# å¸¸è§é—®é¢˜

---

## åŠ è½½ç¼“æ…¢

é¡¹ç›®è¿è¡Œåç¬¬ä¸€æ¬¡åŠ è½½ä¼šåŠ è½½æ‰€æœ‰çš„åŒ…, å› æ­¤æ¯”è¾ƒæ…¢, åé¢çƒ­æ›´æ–°å°±æ¯”è¾ƒå¿«äº†



---

## tab é¡µåˆ‡æ¢åé¡µé¢ç©ºç™½

> [å¸¸è§é—®é¢˜ | Vben Admin (vvbin.cn)](https://vvbin.cn/doc-next/other/faq.html#tab-é¡µåˆ‡æ¢åé¡µé¢ç©ºç™½)

è¿™æ˜¯ç”±äºå¼€å¯äº†è·¯ç”±åˆ‡æ¢åŠ¨ç”»,ä¸”å¯¹åº”çš„é¡µé¢ç»„ä»¶å­˜åœ¨å¤šä¸ªæ ¹èŠ‚ç‚¹å¯¼è‡´çš„ï¼Œåœ¨é¡µé¢æœ€å¤–å±‚æ·»åŠ `<div></div>`å³å¯

**é”™è¯¯ç¤ºä¾‹**

```html
<template>
  <!-- æ³¨é‡Šä¹Ÿç®—ä¸€ä¸ªèŠ‚ç‚¹ -->
  <h1>text h1</h1>
  <h2>text h2</h2>
</template>
```

**æ­£ç¡®ç¤ºä¾‹**

```html
<template>
  <div>
    <h1>text h1</h1>
    <h2>text h2</h2>
  </div>
</template>
```

> PS:
>
> - å¦‚æœæƒ³ä½¿ç”¨å¤šä¸ªæ ¹æ ‡ç­¾ï¼Œå¯ä»¥ç¦ç”¨è·¯ç”±åˆ‡æ¢åŠ¨ç”»
> - template ä¸‹é¢çš„æ ¹æ³¨é‡ŠèŠ‚ç‚¹ä¹Ÿç®—ä¸€ä¸ªèŠ‚ç‚¹ 

---

## 404

åç«¯ä¹Ÿèƒ½æ¥æ”¶åˆ°çš„è¯è¯´æ˜è¯·æ±‚åœ°å€å†™é”™äº†ğŸ˜…

---

# ç¾¤å†… QA

---

# æºç é˜…è¯»

## Login ä¸šåŠ¡

### api

---

#### login

ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®åé¦–å…ˆä¼šè§¦å‘ `login` api

![image-20220518180854173](http://cdn.ayusummer233.top/img/202205181808091.png)

![image-20220518180922032](http://cdn.ayusummer233.top/img/202205181809451.png)

![image-20220518180907982](http://cdn.ayusummer233.top/img/202205181809688.png)

> ä¸Šé¢ä¸‰ä¸ªå›¾ç¤ºä¸ºåœ¨ mock ç¯å¢ƒä¸‹é»˜è®¤çš„ login è¯·æ±‚æƒ…å†µ

apiæ•°æ®ç»“æ„å®šä¹‰: `src\api\sys\model\userModel.ts`:

ç™»å½•è´Ÿè½½:

```typescript
/**
 * @description: Login interface parameters
 */
export interface LoginParams {
  username: string;
  password: string;
}
```

ç™»å½•å“åº”ä½“: 

```typescript
export interface RoleInfo {
  roleName: string;
  value: string;
}

/**
 * @description: Login interface return value
 */
export interface LoginResultModel {
  userId: string | number;
  token: string;
  role: RoleInfo;
}
```

å¯ä»¥çœ‹åˆ°, æºç å®šä¹‰çš„å“åº”ç»“æ„å’Œä¸Šé¢ mock æ¨¡å¼ä¸‹çš„ç›¸åº”ç»“æœæœ‰å‡ºå…¥, åè€…å¤šäº†ä¸¤ä¸ªå‚æ•°: `desc` å’Œ `realName`, ä¸è¿‡è¿™å¹¶ä¸å½±å“æ­£å¸¸å“åº”, å¹¶ä¸”å…¶å®è¿™ä¸¤ä¸ªå‚æ•°ä¼šåœ¨åç»­ä¼šè°ƒç”¨çš„ `getUserIno` ç›¸åº”ä¸­åŒ…å«

---

#### getUserInfo

`login` api æ­£ç¡®å“åº”åä¼šè°ƒç”¨ `getUserInfo` api è·å–ç”¨æˆ·ä¿¡æ¯

![image-20220518181829146](http://cdn.ayusummer233.top/img/202205181820877.png)

![image-20220518182037436](http://cdn.ayusummer233.top/img/202205181820923.png)

> ä¸Šé¢2ä¸ªå›¾ç¤ºä¸ºåœ¨ mock ç¯å¢ƒä¸‹é»˜è®¤çš„ `getUserInfo` è¯·æ±‚æƒ…å†µ

è·å–ç”¨æˆ·ä¿¡æ¯å“åº”ç»“æ„:

```typescript
/**
 * @description: Get user information return value
 */
export interface GetUserInfoModel {
  roles: RoleInfo[];
  // ç”¨æˆ·id
  userId: string | number;
  // ç”¨æˆ·å
  username: string;
  // çœŸå®åå­—
  realName: string;
  // å¤´åƒ
  avatar: string;
  // ä»‹ç»
  desc?: string;
}

```

ä¸ `login` ç±»ä¼¼, `getUserInfo` çš„å“åº”ä½“ä¹Ÿå¤šäº†ä¸€äº›æœªå®šä¹‰çš„å‚æ•°, ä¸è¿‡å¹¶ä¸å½±å“å®é™…è¿ä½œ















