# Mysql

---

## é‡ç½®è‡ªå¢é‡

> [MySqlé‡ç½®è‡ªå¢å­—æ®µçš„èµ·å§‹å€¼ - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/d3b225260042)
>
> [é¢è¯•å®˜:mysqlå¦‚ä½•é‡ç½®è‡ªå¢id_wx6010cbc8d50caçš„æŠ€æœ¯åšå®¢_51CTOåšå®¢](https://blog.51cto.com/u_15095774/2718785)
>
> [MySQL / MariaDB é‡ç½®è‡ªå¢ ID (AUTO_INCREMENT)æ•™ç¨‹ - å®Œç¾ä¿ç•™è¡¨æ•°æ®çš„ç»ˆæè§£å†³æ–¹æ¡ˆ - å¡æ‹‰äº‘ (kalacloud.com)](https://kalacloud.com/blog/how-to-reset-auto-increment-in-mysql/#å››-ä¿ç•™æ•°æ®é‡ç½®---ç›´æ¥åˆ é™¤-id-æ³•)

---

# SQLite

## virtual columns

> [JSON and virtual columns in SQLite (antonz.org)](https://antonz.org/json-virtual-columns/)

å¦‚ä½•åœ¨ SQLite ä¸­ä½¿ç”¨ JSON å’Œ Virtual Columns å®ç°ä¸€äº›æ›´çµæ´»çš„ç”¨æ³• 

å‡è®¾æˆ‘ä»¬æƒ³è¦ä¿ç•™ç³»ç»Ÿä¸­ä¸€äº›äº‹ä»¶çš„æ—¥å¿—, æ¯ä¸ªäº‹ä»¶éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„å­—æ®µ, ä¾‹å¦‚:

`ç™»å½•`:

```json
{
    "timestamp": "2022-05-15T09:31:00Z",
    "object": "user",
    "object_id": 11,
    "action": "login",
    "details": {
        "ip": "192.168.0.1"
    }
}
```

`è´¦æˆ·å­˜æ¬¾`:

```json
{
    "timestamp": "2022-05-15T09:32:00Z",
    "object": "account",
    "object_id": 12,
    "action": "deposit",
    "details": {
        "amount": "1000",
        "currency": "USD"
    }
}
```

ç”±äºè¿™ç§ json æ•°æ®çš„è§„èŒƒåŒ–å¹¶ä¸å®¹æ˜“, å› æ­¤å¯ä»¥ç›´æ¥å­˜å‚¨ json

åˆ›å»ºä¸€ä¸ª events è¡¨, åªåŒ…å«ä¸€ä¸ª text ç±»å‹çš„ value å­—æ®µ

value å­—æ®µçš„å€¼ä¸º:

```json
{"timestamp":"2022-05-15T09:31:00Z","object":"user","object_id":11,"action":"login","details":{"ip":"192.168.0.1"}}
{"timestamp":"2022-05-15T09:32:00Z","object":"account","object_id":12,"action":"deposit","details":{"amount":"1000","currency":"USD"}}
{"timestamp":"2022-05-15T09:33:00Z","object":"company","object_id":13,"action":"edit","details":{"fields":["address","phone"]}}
```

æ­¤æ—¶å¯ä»¥é€šè¿‡ json è§£æ„æŸ¥è¡¨:

```sqlite
select
  json_extract(value, '$.object') as object,
  json_extract(value, '$.action') as action
from events
where json_extract(value, '$.object_id') = 11;
```

![](http://cdn.ayusummer233.top/img/202205230849736.png)

åªæ˜¯æ»¡è¶³åŸºæœ¬æŸ¥è¯¢çš„è¯åˆ°æ­¤ä¸ºæ­¢å°±è¶³å¤Ÿäº†, ä½†æ˜¯å½“æ•°æ®é‡èµ·æ¥å, æŸ¥è¯¢é€Ÿåº¦ä¼šå˜å¾—å¾ˆæ…¢, æ­¤æ—¶å¯ä»¥é€šè¿‡å®šä¹‰è™šæ‹Ÿåˆ—å¹¶æ„å»ºç´¢å¼•æ¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦:

`å®šä¹‰è™šæ‹Ÿåˆ—`:

```sqlite
alter table events
add column object_id integer
as (json_extract(value, '$.object_id'));

alter table events
add column object text
as (json_extract(value, '$.object'));

alter table events
add column action text
as (json_extract(value, '$.action'));
```

`æ„å»ºç´¢å¼•`:

```sqlite
create index events_object_id on events(object_id);
```

![image-20220523090909436](http://cdn.ayusummer233.top/img/202205230909523.png)

ç„¶åä½¿ç”¨æ–°çš„è™šæ‹Ÿåˆ—å±æ€§è¿›è¡ŒæŸ¥è¯¢:

```sqlite
select object, action
from events
where object_id = 11;
```

è™šæ‹Ÿåˆ—çš„ä½¿ç”¨è®©æˆ‘ä»¬å‡ ä¹æ‹¥æœ‰äº†ä¸€ä¸ª NoSQL æ•°æ®åº“ğŸ˜‰

---

## è‡ªå¢é‡å½’é›¶

> [SQLite å¦‚ä½•æ¸…ç©ºè¡¨æ•°æ®å¹¶å°†é€’å¢é‡å½’é›¶ (bbsmax.com)](https://www.bbsmax.com/A/n2d9l3gB5D/)

```sqlite
DELETE FROM sqlite_sequence WHERE name = â€˜TableNameâ€™; --å¯ä»¥å°†é€’å¢æ•°å½’é›¶
```

å½“ SQLite æ•°æ®åº“ä¸­åŒ…å«è‡ªå¢åˆ—æ—¶ï¼Œä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªåä¸º `sqlite_sequence` çš„è¡¨ã€‚

`sqlite_sequence` è¡¨åŒ…å«ä¸¤ä¸ªåˆ—ï¼šname å’Œ seqã€‚

- `name` è®°å½•è‡ªå¢åˆ—æ‰€åœ¨çš„è¡¨

- `seq` è®°å½•å½“å‰åºå·ï¼ˆä¸‹ä¸€æ¡è®°å½•çš„ç¼–å·å°±æ˜¯å½“å‰åºå·åŠ 1ï¼‰ã€‚

  å¦‚æœæƒ³æŠŠæŸä¸ªè‡ªå¢åˆ—çš„åºå·å½’é›¶ï¼Œåªéœ€è¦ä¿®æ”¹ `sqlite_sequence` è¡¨å°±å¯ä»¥äº†ã€‚

```sqlite
UPDATE sqlite_sequence SET seq = 0 WHERE name = â€˜TableNameâ€™;
```

ä¹Ÿå¯ä»¥ç›´æ¥æŠŠè¯¥è®°å½•åˆ æ‰ï¼š

```sqlite
DELETE FROM sqlite_sequence WHERE name = â€˜TableNameâ€™;
```

è¦æƒ³å°†æ‰€æœ‰è¡¨çš„è‡ªå¢åˆ—éƒ½å½’é›¶ï¼Œç›´æ¥æ¸…ç©ºsqlite_sequenceè¡¨å°±å¯ä»¥äº†ï¼š

```sqlite
DELETE FROM sqlite_sequence;
```

----

## Litestream

> [benbjohnson/litestreamï¼šSQLite çš„ Streaming Replicationã€‚ (github.com)](https://github.com/benbjohnson/litestream)
>
> [Getting Started - Litestream](https://litestream.io/getting-started/)
>
> [Install - Litestream](https://litestream.io/install/)

`Litestream` æ˜¯ SQLite çš„ç‹¬ç«‹æµå¤åˆ¶å·¥å…·; å…¶ä½œä¸ºåå°è¿›è¡Œè¿è¡Œ, å¹¶å®‰å…¨åœ°å°†æ›´æ”¹å¢é‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æˆ– S3;

`Litestream` ä»…é€šè¿‡ `SQLite API`  ä¸ `SQLite` é€šä¿¡, å› æ­¤å®ƒå¹¶ä¸ä¼šæŸåæ•°æ®åº“;

> Windows ä¸‹ä½¿ç”¨éœ€è¦ä»æºç è¿›è¡Œæ„å»º

---

# æ•°æ®åº“ç®¡ç†è½¯ä»¶

## Navicat

### ç”Ÿæˆ ER å…³ç³»å›¾å¹¶å¯¼å‡º

> [ä½¿ç”¨Navicatç”ŸæˆERå…³ç³»å›¾å¹¶å¯¼å‡º_å¾®é›¨ç‡•å‡éœœå¯’çš„åšå®¢-CSDNåšå®¢_navicatç”Ÿæˆerå›¾](https://blog.csdn.net/xu1227233860/article/details/78278393)

å…¶å®è¿™ä¸ªç•Œé¢å°±æ˜¯ ER å›¾:

![image-20220508094446047](http://cdn.ayusummer233.top/img/202205080944251.png)

![image-20220508094509043](http://cdn.ayusummer233.top/img/202205080945114.png)

![](http://cdn.ayusummer233.top/img/202205080946563.png)

![image-20220508094953764](http://cdn.ayusummer233.top/img/202205080949926.png)




---

# å·¥å…·

## ç»“æ„åŒ– SQL ç”Ÿæˆå™¨

> [ç»“æ„åŒ– SQL ç”Ÿæˆå™¨ - by é±¼çš® (yupi.icu)](http://sql.yupi.icu/)
>
> [liyupi/sql-generator: ğŸ”¨ ç”¨ JSON æ¥ç”Ÿæˆç»“æ„åŒ–çš„ SQL è¯­å¥ï¼ŒåŸºäº Vue3 + TypeScript + Vite + Ant Design + MonacoEditor å®ç°ï¼Œé¡¹ç›®ç®€å•ï¼ˆé‡é€»è¾‘è½»é¡µé¢ï¼‰ã€é€‚åˆç»ƒæ‰‹~ (github.com)](https://github.com/liyupi/sql-generator)

ä½¿ç”¨ JSON æ¥è½»æ¾ç”Ÿæˆå¤æ‚çš„ SQL ä»è€Œæé«˜å†™ SQL çš„æ•ˆç‡

![image-20220515220928033](http://cdn.ayusummer233.top/img/202205152209216.png)

---





