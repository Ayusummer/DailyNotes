# 通识

- [通识](#通识)
  - [语言学习](#语言学习)
  - [配置文件](#配置文件)
    - [toml](#toml)
    - [YAML](#yaml)
  - [开发环境相关](#开发环境相关)
    - [Visual Studio](#visual-studio)
      - [快捷键相关](#快捷键相关)
        - [Ctrl+Shift+P 不可用](#ctrlshiftp-不可用)
      - [编码相关](#编码相关)
    - [VSCode](#vscode)
      - [快捷键相关](#快捷键相关-1)
      - [命令行](#命令行)
      - [扩展相关](#扩展相关)
        - [`PlantUML` ---- 流程图绘制](#plantuml------流程图绘制)
        - [`Markdown Preview Enhanced`](#markdown-preview-enhanced)
        - [clang-format](#clang-format)
        - [Jupyter](#jupyter)
    - [PowerShell](#powershell)
      - [报错收集](#报错收集)
        - [无法加载 `xxx.ps1`, 因在此系统上禁止运行脚本。有关详细信息，请参阅 关于执行策略 - PowerShell | Microsoft Docs 中的 `about_Execution_Policies`。](#无法加载-xxxps1-因在此系统上禁止运行脚本有关详细信息请参阅-关于执行策略---powershell--microsoft-docs-中的-about_execution_policies)
      - [PowerShell 7](#powershell-7)
    - [Oh My Posh](#oh-my-posh)
      - [Quick Start For Windows](#quick-start-for-windows)
    - [宝塔](#宝塔)
      - [安装](#安装)
      - [常用命令](#常用命令)
    - [虚拟机](#虚拟机)
      - [NAT 和桥接模式的区别](#nat-和桥接模式的区别)
  - [浏览器扩展](#浏览器扩展)
    - [JSON Formatter](#json-formatter)

---

## 语言学习

> [如何掌握所有的程序语言 (yinwang.org)](http://www.yinwang.org/blog-cn/2017/07/06/master-pl)

---

## 配置文件

### toml

> [TOML：Tom 的（语义）明显、（配置）最小化的语言](https://toml.io/cn/)
>
> ---
>
> [在 python 中，该选择哪个 toml 包呢？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/514155226)
>
> [TOML 教程 - 可能是目前最好的配置文件格式 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/50412485)
>
> [常用配置文件-toml 文件\_玉米丛里吃过亏的博客-CSDN 博客\_toml 文件](https://blog.csdn.net/y472360651/article/details/116545351)

> 虽然 [在 python 中，该选择哪个 toml 包呢？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/514155226) 提到在 Python 中 `rtoml` 的兼容性和速度都要优于 `toml` 库, 但是实际使用中并未能正确加载 toml 文件, 因此使用了 `toml` 库, 后续有待进一步考证其实用性  
> PS: 20230118 更新, rtoml 确实挺好用的

---

### YAML

> [一文看懂 YAML - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/145173920)

---

## 开发环境相关

### Visual Studio

---

#### 快捷键相关

```
Ctrl + M + O: 折叠所有方法
Ctrl + M + M: 折叠或者展开当前方法
Ctrl + M + L: 展开所有方法
```

---

###### Ctrl+Shift+P 不可用

热键冲突, 和 PicGo 冲了, 把 PicGo 快捷上传的热键改成其他的就行了

> [解决 VSCode Ctrl Shift P 快捷键不可用\_团子大圆帅的博客-CSDN 博客](https://blog.csdn.net/jpch89/article/details/109381076)

---

#### 编码相关

- vs 将默认编码调成 UTF-8 : vs 默认编码非 UTF-8,可以通过如下扩展更改默认编码为 UTF-8
  - 拓展——>联机——>force UTF-8（No BOM)

---

### VSCode

---

#### 快捷键相关

```
Ctrl+K, Ctrl+J : 展开所有方法
Ctrl+K, Ctrl+0 : 折叠所有方法
```

---

#### 命令行

- 命令行中使用 `code .` 命令可以新建一个以当前命令行作用目录为根目录的 VSCode 窗口, 相应的 `.\`, `..` 等相对路径的使用方式不再赘述

---

#### 扩展相关

---

###### `PlantUML` ---- 流程图绘制

![20210522214659](http://cdn.ayusummer233.top/img/20210522214659.png)

- [官网](https://plantuml.com/zh/)
- PlantUML 是一个开源项目，支持快速绘制：
  - 时序图
  - 用例图
  - 类图
  - 对象图
  - 活动图
  - 组件图
  - 部署图
  - 状态图
  - 定时图
- 同时还支持以下非 UML 图：
  - JSON 数据
  - YAML 数据
  - 网络图 (nwdiag)
  - 线框图形界面
  - 架构图
  - 规范和描述语言 (SDL)
  - Ditaa 图
  - 甘特图
  - 思维导图
  - WBS 工作分解图
  - 以 AsciiMath 或 JLaTeXMath 符号的数学公式
  - 实体关系图

---

###### `Markdown Preview Enhanced`

![20210522215021](http://cdn.ayusummer233.top/img/20210522215021.png)

---

- 可以用来绘制流程图
- [官网文档](https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/diagrams)
- `flow`代码块中的代码会被[flowchart.js](https://flowchart.js.org/)渲染
- [参考链接](https://segmentfault.com/a/1190000006247465####)

---

###### clang-format

> [Clang 13 documentation](https://clang.llvm.org/docs/ClangFormat.html)  
> [clang-format 使用介绍 - 掘金 (juejin.cn)](https://juejin.cn/post/6844904174736375815)  
> [llvm/llvm-project: The LLVM Project is a collection of modular and reusable compiler and toolchain technologies. Note: the repository does not accept github pull requests at this moment. Please submit your patches at http://reviews.llvm.org.](https://github.com/llvm/llvm-project)
>
> [【VScode】统一代码格式规范之 Clang-format 格式化 C++ 代码（亲测可行）\_【欢迎关注，一起学习，共同进步！】-CSDN 博客\_clang-format.executable](https://blog.csdn.net/qq_44324181/article/details/117382733)

该程序能够自动化格式 C/C++/Obj-C 代码，支持多种代码风格：Google, Chromium, LLVM, Mozilla, WebKit，也支持自定义 style（通过编写 .clang-format 文件）。

[windows 安装包](https://ayusummer-my.sharepoint.com/:f:/g/personal/233_ayusummer_onmicrosoft_com/Ek77FVvckddBghT2aXdQC6ABaZo5ZOKuE70B0qD8Qru92Q?e=8JcbEn)

安装时选择添加 path

安装完后可以打开 cmd 检查下 clang-format 版本

```bash
clang-format.exe --version
```

VSCode 扩展商店中安装 clang-format 扩展

![20211208194743-clang-fromat-VSCode扩展界面](http://cdn.ayusummer233.top/img/20211208194743.png)

- `settings.json`中的 `[markdown.extension.clang-format]` 配置

  ```json
  "editor.formatOnSave": true   // 是否在保存时自动格式化
  ```

- 在插件设置中配置 clang-fromat.exe 文件路径  
  ![20211208212248-在插件设置中配置 clang-fromat.exe 文件路径](http://cdn.ayusummer233.top/img/20211208212248.png)
- 默认 2 格缩进, 如果想改 4 格缩进请打开 `LLVM` 安装目录下的 `bin` 文件夹然后在此处打开 `powershell` 并执行:

  ```shell
  clang-format -style=llvm -dump-config > .clang-format
  ```

  打开生成的 `.clang-format` 文件, 找到 `IndentWidth` 并将其改为 4

---

###### Jupyter

####### Jupyter 导出 PDF 报错

**结论: 先导出 HTML 再导出 PDF**

> [jupyter kernal keeps dying · Issue #1892 · jupyter/notebook (github.com)](https://github.com/jupyter/notebook/issues/1892)

先按照提示把 `MikTex` 装了然后再尝试导出下 `PDF`

不行的话先清除 conda cahce

```shell
conda clean -tipsy
```

卸载并重装以下包

- ipykernel
- ipython
- jupyter_client
- jupyter_core
- traitlets
- ipython_genutils

```shell
conda uninstall ipykernel, ipython, jupyter_client, jupyter_core, traitlets, ipython_genutils -y

conda install ipykernel ipython jupyter_client jupyter_core traitlets ipython_genutils -y
```

然后再尝试导出下 `PDF`

后续根据报错可能还需要安装一些包

```shell
conda install Jupyter nbconvert, yaml, pyyaml -y
```

内嵌图片总是会报错, 目前还没有找到适合我的解决方案, 找到一个相关的[github issue](https://github.com/jupyter/notebook/issues/1892)里有 4 年前的解决方案, 尝试无果, 只好先导出 HTML 再打印 PDF

尝试注释掉了所有图片再导出 PDF, 发现还有个问题在于中文字体不能正常显示, 那么倒不如先导出 HTML 再打印 PDF

---

### PowerShell

#### 报错收集

###### 无法加载 `xxx.ps1`, 因在此系统上禁止运行脚本。有关详细信息，请参阅 [关于执行策略 - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.2) 中的 `about_Execution_Policies`。

> [关于执行策略 - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.2)

`Windwos+x -> 以管理员身份运行 PowerShell`

```powershell
# 获取当前策略配置
get-ExecutionPolicy
```

> ![image-20220824095328309](http://cdn.ayusummer233.top/img/202208240957994.png)
>
> 默认是 `Restricted`:
>
> - Windows 客户端计算机的默认执行策略。
> - 允许单个命令，但不允许脚本。
> - 防止运行所有脚本文件，包括格式化和配置文件 () `.ps1xml` 、模块脚本文件 (`.psm1`) ，以及 powerShell 配置文件 (`.ps1`) 。
>
> 可以将其改为 `RemoteSigned`
>
> - Windows 服务器计算机的默认执行策略。
> - 脚本可以运行。
> - 需要来自受信任的发布者对从 Internet 下载的脚本和配置文件（包括电子邮件和即时消息程序）的数字签名。
> - 不需要对在本地计算机上编写的脚本（而不是从 Internet 下载）进行数字签名。
> - 如果脚本被取消阻止，则运行从 Internet 下载且未签名的脚本，例如使用 `Unblock-File` cmdlet。
> - 从 Internet 以外的源运行未签名脚本的风险，以及可能是恶意的签名脚本。

```powershell
# 设置 powershell 的策略
Set-ExecutionPolicy
```

输入 `RemoteSigned` 并回车, 输入 `y` 确认更改;

然后可以 `get-ExecutionPolicy` 看下是否改动完成

> ![image-20220824095701736](http://cdn.ayusummer233.top/img/202208240957639.png)

---

#### PowerShell 7

> [Releases · PowerShell/PowerShell (github.com)](https://github.com/PowerShell/PowerShell/releases)
>
> [在 Windows 上安装 PowerShell - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.2#msi)
>
> [从 Windows PowerShell 5.1 迁移到 PowerShell 7 - PowerShell | Microsoft Docs](https://docs.microsoft.com/zh-cn/powershell/scripting/whats-new/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.2)

```powershell
# 查看 powershell 版本
$psversiontable
```

PowerShell 7 是专为云、本地和混合环境设计的，它包含增强功能和[新功能](https://docs.microsoft.com/zh-cn/powershell/scripting/whats-new/what-s-new-in-powershell-70?view=powershell-7.2)。

- 与 Windows PowerShell 并行安装和运行
- 提升了与现有 Windows PowerShell 模块的兼容性
- 新语言功能（如三元运算符和 `ForEach-Object -Parallel`）
- 提高了性能
- 基于 SSH 的远程处理
- 跨平台互操作性
- 支持 Docker 容器

PowerShell 7 与 Windows PowerShell 并行运行，可便于你在部署前轻松地测试和比较各个版本。 迁移简单、快捷、安全，

以下 Windows 操作系统支持 PowerShell 7：

- Windows 8.1、10 和 11
- Windows Server 2012、2012 R2、2016 和 2019

PowerShell 7 还在 macOS 和多个 Linux 发行版本上运行。 若要获取受支持操作系统的列表，并了解支持生命周期，请参阅 [PowerShell 支持生命周期](https://docs.microsoft.com/zh-cn/powershell/scripting/install/powershell-support-lifecycle?view=powershell-7.2)。

---

PowerShell 7 默认安装路径为 `C:\Program Files\PowerShell\`

---

#### Oh My Posh

> [Home | Oh My Posh](https://ohmyposh.dev/)

A prompt theme engine for any shell.

![image-20230414001558700](http://cdn.ayusummer233.top/DailyNotes/202304140016105.png)

##### Quick Start For Windows

- 首先 [在 Windows 上安装 PowerShell7 - PowerShell | Microsoft Learn](https://learn.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.2#msi), 默认的 Powershell5 不支持主题中的一些语法

- 使用 `winget` 安装 `OhMyPosh`:

  由于要到 github 获取资源, 因此挂代理会快些, 以本地 7890 端口有代理为例, 可以在 powershell 中临时设置代理配置:

  ```powershell
  $env:HTTP_PROXY="http://127.0.0.1:7890"
  $env:HTTPS_PROXY="http://127.0.0.1:7890"
  ```

  然后使用 `winget` 安装 `OhMyPosh`

  ```powershell
  winget install JanDeDobbeleer.OhMyPosh -s winget
  ```

- 安装一个支持的字体, 如 [MesloLGSNF](https://github.com/fontmgr/MesloLGSNF)

  > 官方文档中使用 `oh-my-posh font install` 选择字体进行安装, 不过我安装后进行配置时总是找不到字体, 最终使用 `MESLOLGS NF` 成功进行了配置

  然后在 Powershell 中使用快捷键 `Ctrl+Shift+,` 调起配置文件, 在 `profiles` 中的 `defaults` 属性下添加 `font.face` 属性

  ![image-20230414002805811](http://cdn.ayusummer233.top/DailyNotes/202304140028837.png)

  ```json
              "font":
              {
                  "face": "MesloLGS NF"
              }
  ```

  添加并保存后会自动弹回到打开的 Powershell 窗口, 不报错就说明成功用上了字体

  ***

  对于 VSCode 而言, VSCode 调起的终端中的字体配置还需要在 VSCode 的配置项中配下

  ![image-20230414003342061](http://cdn.ayusummer233.top/DailyNotes/202304140033087.png)

- 接下来编辑 powershell 配置文件配置默认使用 `OhMyPosh`

  ```powershell
  code $PROFILE
  ```

  在配置中加上如下语句

  ```powershell
  oh-my-posh init pwsh | Invoke-Expression
  ```

  ![image-20230414003110073](http://cdn.ayusummer233.top/DailyNotes/202304140031095.png)

  这样即可成功让 powershell 使用上 OhMyPosh

- 配置主题

  可以在 [Themes | Oh My Posh](https://ohmyposh.dev/docs/themes) 查看 OhMyPosh 中支持的主题

  或者使用如下命令直接在 Powershell 中预览主题

  ```powershell
  Get-PoshThemes
  ```

  ![image-20230414003535662](http://cdn.ayusummer233.top/DailyNotes/202304140035712.png)

  > 记得及时 `Ctrl + C`, 不然会拖很长, 毕竟主题挺多的

  在 Powershell 中预览主题时, 主题的名字是超链接, 可以通过 Ctrl + 鼠标点击的形式编辑该主题配置文件

  ![image-20230414003739707](http://cdn.ayusummer233.top/DailyNotes/202304140037760.png)

  ![image-20230414003752894](http://cdn.ayusummer233.top/DailyNotes/202304140037931.png)

  然后编辑 Powershell 配置文件, 配置 OhMyPosh 的主题

  ```powershell
  code $PROFILE
  ```

  添加如下命令

  ```powershell
  oh-my-posh init pwsh --config '主题json路径' | Invoke-Expression
  ```

  ![image-20230414004039339](http://cdn.ayusummer233.top/DailyNotes/202304140040357.png)

  然后重启 Powershell/VSCode 窗口即可看到 Powershell 加载了 OhMyPosh 及设定的主题

  ![image-20230414004140231](http://cdn.ayusummer233.top/DailyNotes/202304140041246.png)

  ![image-20230414004152193](http://cdn.ayusummer233.top/DailyNotes/202304140041208.png)

  > 需要注意的是如果是默认的 powershell5 的话, 加载主题可能会报错, 且每次打开 powershell 窗口均会报错, 因此建议直接升级到 powershell7
  >
  > ![image-20230414004218421](http://cdn.ayusummer233.top/DailyNotes/202304140042453.png)
  >
  > 可以通过如下命令查看 powershell 版本
  >
  > ```powershell
  > $psversiontable
  > ```
  >
  > ![image-20230414004313579](http://cdn.ayusummer233.top/DailyNotes/202304140043602.png)
  >
  > ![image-20230414004329598](http://cdn.ayusummer233.top/DailyNotes/202304140043653.png)

---

### 宝塔

[宝塔面板下载，免费全能的服务器运维软件 (bt.cn)](https://www.bt.cn/new/download.html)

---

#### 安装

- ubuntu

  ```bash
  wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh ed8484bec
  ```

---

#### 常用命令

```bash
# 启动
/etc/init.d/bt start
# 关闭
/etc/init.d/bt stop
# 重启
/etc/init.d/bt restart
# 卸载
/etc/init.d/bt stop && chkconfig --del bt && rm -f /etc/init.d/bt && rm -rf /www/server/panel
# 查看当前面板端口
cat /www/server/panel/data/port.pl
#
```

---

### 虚拟机

#### NAT 和桥接模式的区别

> [NAT 模式、路由模式、桥接模式的区别 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/426335377)

- 在 NAT 模式下，虚拟机的 IP 地址是由虚拟机网卡模拟的，虚拟机与物理机之间是通过主机 NAT 网络进行通信。NAT 网络会分配一个私有 IP 地址给虚拟机，并将虚拟机发送的数据包进行地址转换，从而实现虚拟机与外网的通信。

  NAT 模式的优点是可以方便地与外网通信，因为 NAT 网络已经对虚拟机进行了地址转换，使得虚拟机看起来像是一个普通的主机，可以通过外网访问虚拟机提供的服务。

- 在桥接模式下，虚拟机与物理机在同一网段，它们共享同一个网络地址。虚拟机可以直接访问物理网络中的其他主机，并且其他主机也可以直接访问虚拟机。桥接模式需要主机中的一个网络接口作为虚拟机网卡的桥接接口，虚拟机网卡会与桥接接口绑定，从而实现虚拟机与物理机的通信。

  桥接模式的优点是虚拟机可以直接访问物理网络中的其他主机，这样可以方便地进行网络测试和开发。另外，虚拟机与物理机在同一网段，也可以使得虚拟机的网络设置更加灵活。

---

## ESXI

### 导出 OVF

- 对于 ESXI 7.0 及以上, 可以直接使用 ESXI Web 控制台中的导出选项将虚拟机关机然后导出为 OVF 模板

  ![image-20230703153012501](http://cdn.ayusummer233.top/DailyNotes/202307031530601.png)
  
  ![image-20230703154108407](http://cdn.ayusummer233.top/DailyNotes/202307031541538.png)

- 对于ESXI 6.7 而言直接导出映像似乎会失败, 可以使用 OVFTOOL 来导出
    
    [OVFTool.7z](https://ayusummer-my.sharepoint.com/:u:/g/personal/mixon_ayusummer_onmicrosoft_com/EfcOoBjr9U1BqlIFuQx2bTkBxCpI2y3B0JtjahFe0RLSGw?e=fzBh8q)
    
    导出前需要先关闭虚拟机再导出,  时间比较慢，可以把控制台的快速编辑模式关闭以免误触导致程序挂起
    
    命令：
    
    ```bash
    ./ovftool.exe --noSSLVerify vi://root@192.168.1.6/kali_16 D\\kali_16
    ```
    
    >  上述命令中的 `kali_16` 指的是 EXSI 页面中显示的虚拟机的名称, 即下图中的上面红框中的内容(ps: 后面改成了 kali_16_52 因此和上面的命令截图对不上了)

---

## 浏览器扩展

### [JSON Formatter](https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa/related)

美化 JSON, 测试 api 的时候比较好用

![image-20220429150907866](http://cdn.ayusummer233.top/img/202204291509244.png)

![image-20220429150945870](http://cdn.ayusummer233.top/img/202204291509214.png)

或者也可以直接用 [Apipost-API 文档、调试、Mock、测试一体化协作平台](https://www.apipost.cn/)

![image-20220429152405796](http://cdn.ayusummer233.top/img/202204291524210.png)

---
