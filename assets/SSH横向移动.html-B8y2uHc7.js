import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,o as c,c as p,a as s,d as e,b as n,e as l}from"./app-DxMJFouC.js";const r={},d=s("h1",{id:"ssh-æ¨ªå‘ç§»åŠ¨",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ssh-æ¨ªå‘ç§»åŠ¨"},[s("span",null,"SSH æ¨ªå‘ç§»åŠ¨")])],-1),u={href:"https://www.ddosi.org/ssh-movement/",target:"_blank",rel:"noopener noreferrer"},h=s("hr",null,null,-1),m=s("h2",{id:"ssh-çš„æ¦‚å¿µ",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ssh-çš„æ¦‚å¿µ"},[s("span",null,"SSH çš„æ¦‚å¿µ")])],-1),v={href:"https://info.support.huawei.com/info-finder/encyclopedia/zh/SSH.html",target:"_blank",rel:"noopener noreferrer"},k=s("p",null,"SSH(Secure Shellï¼Œå®‰å…¨å¤–å£³) æ˜¯ä¸€ç§ç½‘ç»œå®‰å…¨åè®®ï¼Œä¸ä¼ ç»Ÿçš„ Telnet, FTP ä½¿ç”¨æ˜æ–‡ä¼ è¾“æ•°æ®ä¸åŒ, SSH åè®®é€šè¿‡åŠ å¯†å’Œè®¤è¯æœºåˆ¶å®ç°å®‰å…¨çš„è®¿é—®å’Œæ–‡ä»¶ä¼ è¾“ç­‰ä¸šåŠ¡ã€‚",-1),S=s("p",null,"ä½¿ç”¨æ˜æ–‡ä¼ è¾“æ•°æ®å®¹æ˜“å› ä¸­é—´äººå—…æ¢è€Œæ³„éœ²æ•°æ®",-1),b={href:"https://chenzhonzhou.github.io/2021/01/04/kali-xiu-tan-qi-pian/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://zhuanlan.zhihu.com/p/562434778",target:"_blank",rel:"noopener noreferrer"},f={href:"https://www.cnblogs.com/jingzh/p/16018410.html",target:"_blank",rel:"noopener noreferrer"},_={href:"https://www.geekby.site/2020/05/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1%E7%B1%BB%E6%BC%8F%E6%B4%9E/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://xueyp.github.io/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/2018/11/20/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%B1%80%E5%9F%9F%E7%BD%91https%E5%97%85%E6%8E%A2.html",target:"_blank",rel:"noopener noreferrer"},E=s("hr",null,null,-1),y=s("h2",{id:"ssh-çš„å·¥ä½œæµç¨‹",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ssh-çš„å·¥ä½œæµç¨‹"},[s("span",null,"SSH çš„å·¥ä½œæµç¨‹")])],-1),A={href:"https://info.support.huawei.com/info-finder/encyclopedia/zh/SSH.html",target:"_blank",rel:"noopener noreferrer"},x=s("hr",null,null,-1),q={href:"https://www.ruanyifeng.com/blog/2020/07/ssh-certificate.html",target:"_blank",rel:"noopener noreferrer"},B=l(`<p>SSH ç”±æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„æˆï¼Œä¸ºå»ºç«‹å®‰å…¨çš„SSHé€šé“ï¼ŒåŒæ–¹éœ€è¦å…ˆå»ºç«‹TCPè¿æ¥ï¼Œç„¶ååå•†ä½¿ç”¨çš„ç‰ˆæœ¬å·å’Œå„ç±»ç®—æ³•ï¼Œå¹¶ç”Ÿæˆç›¸åŒçš„ä¼šè¯å¯†é’¥ç”¨äºåç»­çš„å¯¹ç§°åŠ å¯†ã€‚åœ¨å®Œæˆç”¨æˆ·è®¤è¯åï¼ŒåŒæ–¹å³å¯å»ºç«‹ä¼šè¯è¿›è¡Œæ•°æ®äº¤äº’ã€‚</p><p>SSHçš„å·¥ä½œæµç¨‹åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªé˜¶æ®µ:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311070711464.png" alt="SSHå·¥ä½œæµç¨‹"></p><blockquote><p>å…¶ä¸­å¯†é’¥äº¤æ¢éƒ¨åˆ†çš„æµç¨‹å¦‚ä¸‹:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311070738610.png" alt="SSHå¯†é’¥äº¤æ¢"></p></blockquote><hr><h2 id="æŸ¥æ‰¾-ssh-å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#æŸ¥æ‰¾-ssh-å¯†é’¥"><span>æŸ¥æ‰¾ SSH å¯†é’¥</span></a></h2><p>ä¸€èˆ¬åœ¨å¦‚ä¸‹ç›®å½•, æ–‡ä»¶ä¸­:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>/home/*
<span class="token comment"># å­˜å‚¨äº†å…è®¸ç™»å½•åˆ°rootç”¨æˆ·çš„SSHå…¬é’¥ï¼Œæ¯è¡Œä¸€ä¸ªå…¬é’¥</span>
<span class="token comment"># æ ¼å¼ä¸º algorithm base64-encoded-public-key comment</span>
<span class="token comment"># ä¾‹å¦‚ ssh-rsa AAAAB3Nxxxxxem9FeM8w+zEmUb+Es= xxl-job</span>
<span class="token function">cat</span> /root/.ssh/authorized_keys 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(SSHåè®®ç‰ˆæœ¬1)ä¸­ä½¿ç”¨çš„å…¬é’¥æ–‡ä»¶(deprecated)</span>
<span class="token function">cat</span> /root/.ssh/identity.pub 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(V1)ä¸­ä½¿ç”¨çš„ç§é’¥æ–‡ä»¶ã€‚(deprecated)</span>
<span class="token function">cat</span> /root/.ssh/identity 
<span class="token comment"># å­˜å‚¨äº† root ç”¨æˆ·çš„ SSH å…¬é’¥ - SSH V2, é‡‡ç”¨ RSA ç®—æ³•</span>
<span class="token function">cat</span> /root/.ssh/id_rsa.pub 
<span class="token comment"># root çš„ ssh ç§é’¥ - SSH V2, é‡‡ç”¨ RSA ç®—æ³•</span>
<span class="token function">cat</span> /root/.ssh/id_rsa 
<span class="token comment"># å­˜å‚¨äº† root ç”¨æˆ·çš„ SSH å…¬é’¥ - SSH V2, é‡‡ç”¨ DSA ç®—æ³•</span>
<span class="token function">cat</span> /root/.ssh/id_dsa.pub 
<span class="token comment"># root çš„ ssh ç§é’¥ - SSH V2, é‡‡ç”¨ DSA ç®—æ³•</span>
<span class="token function">cat</span> /root/.ssh/id_dsa 
<span class="token comment"># SSH å®¢æˆ·ç«¯å…¨å±€é…ç½®æ–‡ä»¶, å®šä¹‰äº† SSH å®¢æˆ·ç«¯è¿æ¥åˆ° SSH æœåŠ¡å™¨æ—¶çš„ä¸€äº›é€‰é¡¹, ä¾‹å¦‚ç«¯å£å·, è¶…æ—¶æ—¶é—´, åŠ å¯†ç®—æ³•ç­‰</span>
<span class="token function">cat</span> /etc/ssh/ssh_config 
<span class="token comment"># SSH æœåŠ¡å™¨å…¨å±€é…ç½®æ–‡ä»¶, å®šä¹‰äº†SSHæœåŠ¡å™¨æ¥å—SSHå®¢æˆ·ç«¯è¿æ¥æ—¶çš„ä¸€äº›é€‰é¡¹ï¼Œä¾‹å¦‚ç›‘å¬åœ°å€ï¼Œæœ€å¤§è¿æ¥æ•°ï¼Œè®¤è¯æ–¹å¼ç­‰ã€‚</span>
<span class="token function">cat</span> /etc/ssh/sshd_config 
<span class="token comment"># SSH æœåŠ¡å™¨çš„ DSA ä¸»æœºå¯†é’¥å¯¹çš„å…¬é’¥æ–‡ä»¶</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_dsa_key.pub 
<span class="token comment"># SSH æœåŠ¡å™¨çš„ DSA ä¸»æœºå¯†é’¥å¯¹çš„ç§é’¥æ–‡ä»¶</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_dsa_key 
<span class="token comment"># SSH æœåŠ¡å™¨çš„ RSA ä¸»æœºå¯†é’¥å¯¹çš„å…¬é’¥æ–‡ä»¶</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_rsa_key.pub 
<span class="token comment"># SSH æœåŠ¡å™¨çš„ RSA ä¸»æœºå¯†é’¥å¯¹çš„ç§é’¥æ–‡ä»¶</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_rsa_key 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(V1)ä¸­ SSH æœåŠ¡å™¨çš„ SSH å…¬é’¥, æ ¼å¼ä¸ºäºŒè¿›åˆ¶æ•°æ®(deprecated)</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_key.pub 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(V1)ä¸­ SSH æœåŠ¡å™¨çš„ SSH ç§é’¥, æ ¼å¼ä¸ºäºŒè¿›åˆ¶æ•°æ®(deprecated)</span>
<span class="token function">cat</span> /etc/ssh/ssh_host_key
<span class="token comment"># å­˜å‚¨äº†å…è®¸ç™»å½•åˆ°å½“å‰ç”¨æˆ·çš„SSHå…¬é’¥ï¼Œæ¯è¡Œä¸€ä¸ªå…¬é’¥</span>
<span class="token function">cat</span> ~/.ssh/authorized_keys 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(V1)ä¸­ä½¿ç”¨çš„å…¬é’¥æ–‡ä»¶(deprecated)</span>
<span class="token function">cat</span> ~/.ssh/identity.pub 
<span class="token comment"># æ—§ç‰ˆæœ¬SSH(V1)ä¸­ä½¿ç”¨çš„ç§é’¥æ–‡ä»¶ã€‚(deprecated)</span>
<span class="token function">cat</span> ~/.ssh/identity 
<span class="token function">cat</span> ~/.ssh/id_rsa.pub 
<span class="token function">cat</span> ~/.ssh/id_rsa 
<span class="token function">cat</span> ~/.ssh/id_dsa.pub 
<span class="token function">cat</span> ~/.ssh/id_dsa 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">grep</span> <span class="token parameter variable">-rliF</span> <span class="token string">&quot;ssh-rsa&quot;</span> /* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.jar
<span class="token function">grep</span> <span class="token parameter variable">-rliF</span> <span class="token string">&quot;BEGIN RSA PRIVATE KEY&quot;</span> /* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.jar
<span class="token function">grep</span> <span class="token parameter variable">-rliF</span> <span class="token string">&quot;BEGIN DSA PRIVATE KEY&quot;</span> /* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.jar
<span class="token function">grep</span> <span class="token parameter variable">-rliF</span> <span class="token string">&quot;BEGIN OPENSSH PRIVATE KEY&quot;</span> /* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.jar

<span class="token function">grep</span> <span class="token parameter variable">-rli</span> <span class="token string">&quot;ssh-rsa\\|BEGIN RSA PRIVATE KEY\\|BEGIN DSA PRIVATE KEY\\|BEGIN OPENSSH PRIVATE KEY&quot;</span> /* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.jar

<span class="token function">grep</span> <span class="token parameter variable">-rli</span> <span class="token string">&quot;BEGIN RSA PRIVATE KEY\\|BEGIN DSA PRIVATE KEY\\|BEGIN OPENSSH PRIVATE KEY&quot;</span> /etc/ssh/* /root/* /home/* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.<span class="token punctuation">{</span>jar,py,pyc,js<span class="token punctuation">}</span> --binary-files<span class="token operator">=</span>without-match
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>-r</code>: é€’å½’æœç´¢</li><li><code>-l</code>: åªæ˜¾ç¤ºæ–‡ä»¶å</li><li><code>-F</code>: æŒ‰ç…§å›ºå®šå­—ç¬¦ä¸²æœç´¢(ä¸åŠ  <code>-F</code>, é»˜è®¤æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼æœç´¢)</li><li><code>-i</code>: å¿½ç•¥å¤§å°å†™</li><li><code>--exclude=*.jar</code>: æ’é™¤ jar æ–‡ä»¶</li><li><code>--binary-files=without-match</code>: ä¸åŒ¹é…äºŒè¿›åˆ¶æ–‡ä»¶</li></ul><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071421842.png" alt="image-20231107142147662"></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;res&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">mkdir</span> res
<span class="token keyword">fi</span>

<span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>
    <span class="token function">grep</span> <span class="token parameter variable">-rli</span> <span class="token string">&quot;BEGIN RSA PRIVATE KEY\\|BEGIN DSA PRIVATE KEY\\|BEGIN OPENSSH PRIVATE KEY&quot;</span> /etc/ssh/* /root/* /home/* <span class="token parameter variable">--exclude</span><span class="token operator">=</span>*.<span class="token punctuation">{</span>jar,py,pyc,js<span class="token punctuation">}</span> --binary-files<span class="token operator">=</span>without-match
<span class="token variable">)</span></span>

<span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">$files</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token function">cp</span> <span class="token variable">$file</span> res/
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Done!&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071459298.png" alt="image-20231107145935222"></p><p>æ‰¾åˆ°å¯†é’¥åéœ€è¦ç¡®è®¤å…¶å¯ä»¥ç”¨äºå“ªäº›ä¸»æœº, å¯ä»¥æ£€æŸ¥å¦‚ä¸‹æ–‡ä»¶:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Hosts æ–‡ä»¶, ç”¨äºå°†ä¸»æœºåæ˜ å°„åˆ° IP åœ°å€</span>
/etc/hosts 
<span class="token comment"># ssh ç›®å½•ä¸‹çš„ known_hosts æ–‡ä»¶, ç”¨äºå­˜å‚¨ SSH å®¢æˆ·ç«¯è¿æ¥è¿‡çš„ SSH æœåŠ¡å™¨çš„å…¬é’¥</span>
~/.ssh/known_hosts
<span class="token comment"># bash å†å²å‘½ä»¤æ–‡ä»¶, ç”¨äºå­˜å‚¨ç”¨æˆ·æ‰§è¡Œè¿‡çš„å‘½ä»¤</span>
~/.bash_history 
<span class="token comment"># ssh ç›®å½•ä¸‹çš„ config æ–‡ä»¶, ç”¨äºå­˜å‚¨ SSH å®¢æˆ·ç«¯çš„é…ç½®ä¿¡æ¯, ä¹Ÿå¯èƒ½ä¸å« config è€Œæ˜¯å…¶ä»–è‡ªå®šä¹‰çš„åç§°, å­˜å‚¨äº† SSH å®¢æˆ·ç«¯çš„é…ç½®ä¿¡æ¯, ä¾‹å¦‚ ip, ç«¯å£å·, å¯†é’¥, ä»£ç†ç­‰</span>
~/.ssh/config 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>/etc/hosts</code></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071430224.png" alt="image-20231107143043264"></p></li><li><p><code>~/.ssh/known_hosts</code></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071437623.png" alt="image-20231107143714474"></p></li><li><p><code>~/.bash_history </code></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071454845.png" alt="image-20231107145403504"></p></li><li><p><code>~/.ssh/config </code></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202311071455536.png" alt="image-20231107145553483"></p></li></ul><hr><h2 id="ssh-å¯†ç åé—¨" tabindex="-1"><a class="header-anchor" href="#ssh-å¯†ç åé—¨"><span>SSH å¯†ç åé—¨</span></a></h2><p>åœ¨æ”»å‡»æœºä¸Šç”Ÿæˆä¸€å¯¹å¯†é’¥,å°†å…¬é’¥è´´åœ¨å—æ„ŸæŸ“ä¸»æœºçš„ <code>~/.ssh/authorized_keys</code> ä¸­</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">&quot;å¤‡æ³¨ä¿¡æ¯&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå°†ç”Ÿæˆçš„ <code>.pub</code> å…¬é’¥æ”¾åœ¨å—æ„ŸæŸ“ä¸»æœºçš„ <code>~/.ssh/authorized_keys</code> ä¸­å³å¯ä½¿ç”¨æœ¬åœ°çš„ç§é’¥ SSH è¿æ¥åˆ°å—æ„ŸæŸ“ä¸»æœºäº†</p><blockquote><p>ä¾‹å¦‚åœ¨ Redis æœªæˆæƒå†™å…¬é’¥ä¸­å°±æ˜¯å°†å…¬é’¥å†™å…¥äº† <code>authorized_keys</code> ä¸­å† SSH è¿æ¥çš„</p></blockquote><hr><h2 id="ssh-åå‘éš§é“" tabindex="-1"><a class="header-anchor" href="#ssh-åå‘éš§é“"><span>SSH åå‘éš§é“</span></a></h2><h3 id="æ–­ç½‘ä¸»æœºè”ç½‘" tabindex="-1"><a class="header-anchor" href="#æ–­ç½‘ä¸»æœºè”ç½‘"><span>æ–­ç½‘ä¸»æœºè”ç½‘</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-fNR</span> <span class="token number">7890</span>:localhost:7890 <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>sshç§é’¥ç»å¯¹è·¯å¾„<span class="token punctuation">]</span> <span class="token punctuation">[</span>ç”¨æˆ·å<span class="token punctuation">]</span>@<span class="token punctuation">[</span>æœåŠ¡å™¨IP<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-f</code> åå°è¿è¡Œ</li><li><code>-N</code> ä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤, ä»…åšç«¯å£è½¬å‘</li><li><code>-R</code> è¿œç¨‹ç«¯å£è½¬å‘</li></ul><p>å¦‚æ­¤ä¸€æ¥å°±å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨æœ¬åœ°çš„ Clash ä»£ç†äº†</p><ul><li><code>httpä»£ç†</code>: <code>http://localhost:7890</code></li><li><code>socks5ä»£ç†</code>: <code>socks5://localhost:7890</code></li></ul><p>åœ¨æ‰“å†…ç½‘æ—¶å¯ä»¥ç”±æ­¤å®ç°æ–­ç½‘ä¸»æœºè”ç½‘çš„æ•ˆæœ</p><hr><h3 id="è½¬å‘æµé‡" tabindex="-1"><a class="header-anchor" href="#è½¬å‘æµé‡"><span>è½¬å‘æµé‡</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-fND</span> localhost:12345 <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>ç§é’¥è·¯å¾„<span class="token punctuation">]</span> root@192.168.1.96
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-f</code> è¡¨ç¤ºåœ¨åå°è¿è¡Œ ssh å‘½ä»¤, ä¸å ç”¨ç»ˆç«¯</li><li><code>-N</code> è¡¨ç¤ºä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤,åªåšç«¯å£è½¬å‘</li><li><code>-D localhost:12345</code> è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªåŠ¨æ€ç«¯å£è½¬å‘, å°†æœ¬åœ°ä¸»æœºçš„ 12345 ç«¯å£ä½œä¸º socks ä»£ç†</li><li><code>-i [ç§é’¥è·¯å¾„]</code> è¡¨ç¤ºä½¿ç”¨æŒ‡å®šç§é’¥æ–‡ä»¶è¿›è¡Œèº«ä»½éªŒè¯</li><li><code>root@192.168.1.96</code> è¡¨ç¤ºä»¥ root ç”¨æˆ·ç™»å½•è¿œç¨‹ä¸»æœº 192.168.1.96</li></ul><p>è¿™ä¸ªå‘½ä»¤å¯ä»¥ä½¿å¾—é€šè¿‡ ssh éš§é“è®¿é—®è¿œç¨‹ä¸»æœºä¸Šçš„ç½‘ç»œæœåŠ¡, æˆ–è€…ä½¿ç”¨è¿œç¨‹ä¸»æœºä½œä¸ºä»£ç†è®¿é—®å…¶ä»–ç½‘ç«™</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202304041354643.png" alt="image-20230330173345557"></p><p>æŒ‚ä¸Šåå‘½ä»¤è¡Œä¼šå¡åœ¨è¿™é‡Œ ç„¶å Firefox é…ç½® socks 5 ä»£ç†</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202304041354163.png" alt="image-20230330180127369"></p><p>å¦‚æ­¤è¿™èˆ¬å°±å¯ä»¥ä»æœ¬åœ°çš„ Firefox æŒ‚ 96 çš„ä»£ç†è®¿é—®å†…ç½‘å…¶ä»–çš„æœåŠ¡äº†</p><p>é™¤æ­¤ä»¥å¤–è¿˜å¯ä»¥å†å¥—ä¸€å±‚ Burpsuit: <code>BurpSuit -&gt; Proxy Setting -&gt; Network-&gt;Connections-&gt;Socks proxy</code></p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202304041354182.png" alt=""></p><p>é…ç½® BurpSuit http ä»£ç†ç›‘å¬:</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202304041354730.png" alt=""></p><p>é…ç½® Firefox http ä»£ç†</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202304041354257.png" alt=""></p><hr><h2 id="ssh-åŠ«æŒ" tabindex="-1"><a class="header-anchor" href="#ssh-åŠ«æŒ"><span>SSH åŠ«æŒ</span></a></h2>`,48),N={href:"https://attack.mitre.org/techniques/T1563/001/",target:"_blank",rel:"noopener noreferrer"},w=s("p",null,"æ”»å‡»è€…å¯èƒ½ä¼šåŠ«æŒä¸€ä¸ªå½“å‰æ‹¿ä¸‹çš„ä¸»æœºä¸å¦ä¸€ä¸ªä¸»æœºçš„è¿æ¥, åˆ©ç”¨å½“å‰ SSH ä¼šè¯ä¸­çš„å…¬é’¥èº«ä»½éªŒè¯ä¸å…¶ä»–ç³»ç»Ÿå»ºç«‹çš„ä¿¡ä»»å…³ç³», è¿™å¯èƒ½æ˜¯é€šè¿‡æŸå®³ SSH ä»£ç†æœ¬èº«æˆ–è®¿é—®è®¿é—®ä»£ç†çš„socketæ¥å®ç°çš„;",-1),D=s("p",null,"SSH åŠ«æŒä¸ SSH æœ¬èº«ä¸åŒä¹‹å¤„åœ¨äºå®ƒåŠ«æŒç°æœ‰çš„ SSH session è€Œéä½¿ç”¨æœ‰æ•ˆçš„è´¦æˆ·åˆ›å»ºä¸€ä¸ªæ–°çš„ session",-1),I=s("hr",null,null,-1),P=s("h3",{id:"ssh-ä»£ç†è½¬å‘",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ssh-ä»£ç†è½¬å‘"},[s("span",null,"SSH ä»£ç†è½¬å‘")])],-1),R={href:"https://www.ddosi.org/ssh-movement/",target:"_blank",rel:"noopener noreferrer"},T=s("p",null,"SSH ä»£ç†çš„å·¥ä½œåŸç†æ˜¯å…è®¸ä¸€ä¸ªä¸­é—´æœºå™¨ SSH Server å°† Local Host çš„ SSH å¯†é’¥ä»å½“å‰å®¢æˆ·ç«¯ä¼ é€’(è½¬å‘)åˆ°ä¸‹ä¸€ä¸ªä¸‹æ¸¸æœåŠ¡å™¨ Remote Host",-1),V=l(`<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, SSH Server ä¸­å¹¶ä¸ä¼šå­˜å‚¨ä¹Ÿä¸ä¼šç‰©ç†è®¿é—®è€Œä»…ä»…æ˜¯å°†å¯†é’¥ä¼ é€’ç»™ Remote Host</p><hr><h3 id="åŠ«æŒ-ssh-ä»£ç†è½¬å‘" tabindex="-1"><a class="header-anchor" href="#åŠ«æŒ-ssh-ä»£ç†è½¬å‘"><span>åŠ«æŒ SSH ä»£ç†è½¬å‘</span></a></h3><p>SSH ä»£ç†è½¬å‘å…è®¸ç”¨æˆ·åœ¨ä¸è¾“å…¥å¯†ç çš„æƒ…å†µä¸‹è¿æ¥åˆ°å…¶ä»–æœºå™¨ã€‚å½“å­˜åœ¨æ´»åŠ¨ä¼šè¯æ—¶ï¼Œå¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½è®¿é—®å—æ„ŸæŸ“ç”¨æˆ· SSH å¯†é’¥æœ‰æƒè®¿é—®çš„ä»»ä½•ä¸»æœº(æ— éœ€ç›´æ¥è®¿é—®å¯†é’¥) ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># å¸¸è§„ä½¿ç”¨SSHå¯†é’¥è¿æ¥è¿œç¨‹ä¸»æœº:</span>
<span class="token function">ssh</span> <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>ç§é’¥è·¯å¾„<span class="token punctuation">]</span> <span class="token punctuation">[</span>è´¦æˆ·<span class="token punctuation">]</span>/<span class="token punctuation">[</span>ä¸»æœº<span class="token punctuation">]</span>
<span class="token comment"># ä½¿ç”¨ SSH ä»£ç†è½¬å‘, é€šè¿‡ä¸­é—´ä¸»æœºè½¬å‘ SSH å¯†é’¥è¿æ¥è¿œç¨‹ä¸»æœº:</span>
<span class="token function">ssh</span> <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>è¿œç¨‹ç§é’¥è·¯å¾„<span class="token punctuation">]</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">ProxyCommand</span><span class="token operator">=</span><span class="token string">&quot;ssh -i [æœ¬åœ°ç§é’¥è·¯å¾„] -W %h:%p [ä¸­é—´ä¸»æœºè´¦æˆ·]/[ä¸­é—´ä¸»æœº]&quot;</span> <span class="token punctuation">[</span>è´¦æˆ·<span class="token punctuation">]</span>/<span class="token punctuation">[</span>è¿œç¨‹ä¸»æœº<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>-i</code>: æŒ‡å®šç§é’¥è·¯å¾„</li><li><code>-o ProxyCommand</code>: æŒ‡å®šä»£ç†å‘½ä»¤</li><li><code>-W %h:%p</code>: æŒ‡å®šä»£ç†å‘½ä»¤çš„å‚æ•°, <code>%h</code> ä¸ºè¿œç¨‹ä¸»æœº, <code>%p</code> ä¸ºè¿œç¨‹ä¸»æœºçš„ç«¯å£å· <blockquote><p>å°†SSHè¿æ¥å»ºç«‹åˆ°è¿œç¨‹ä¸»æœºhostnameï¼Œå¹¶ä¸”å°†æœ¬åœ°æµé‡é€šè¿‡SSHé€šé“ä¼ é€åˆ°è¿œç¨‹ä¸»æœºçš„%hå’Œ%pæ‰€è¡¨ç¤ºçš„ç›®æ ‡ä¸»æœºå’Œç«¯å£ã€‚</p></blockquote></li></ul><hr><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>æœ¬åœ°ç§é’¥è·¯å¾„<span class="token punctuation">]</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">ProxyCommand</span><span class="token operator">=</span><span class="token string">&quot;ssh -i [ä¸­é—´è·³æ¿1çš„ç§é’¥è·¯å¾„] -W %h:%p [ä¸­é—´è·³æ¿1çš„ç”¨æˆ·å]@[ä¸­é—´è·³æ¿1çš„ä¸»æœºåæˆ–IPåœ°å€] | ssh -i [ä¸­é—´è·³æ¿2çš„ç§é’¥è·¯å¾„] -W %h:%p [ä¸­é—´è·³æ¿2çš„ç”¨æˆ·å]@[ä¸­é—´è·³æ¿2çš„ä¸»æœºåæˆ–IPåœ°å€]&quot;</span> <span class="token punctuation">[</span>ç›®æ ‡ä¸»æœºçš„ç”¨æˆ·å<span class="token punctuation">]</span>@<span class="token punctuation">[</span>ç›®æ ‡ä¸»æœºçš„ä¸»æœºåæˆ–IPåœ°å€<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,8);function z(F,C){const a=t("ExternalLinkIcon"),o=t("Mermaid");return c(),p("div",null,[d,s("blockquote",null,[s("p",null,[s("a",u,[e("SSHæ¨ªå‘ç§»åŠ¨å¤‡å¿˜å•|sshå†…ç½‘æ¨ªå‘æ¸—é€æŠ€å·§ - ğŸ”°é›¨è‹â„’ğŸ”° (ddosi.org)"),n(a)])])]),h,m,s("blockquote",null,[s("p",null,[s("a",v,[e("ä»€ä¹ˆæ˜¯SSHï¼ŸSSHæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ - åä¸º (huawei.com)"),n(a)])])]),k,s("blockquote",null,[S,s("blockquote",null,[s("p",null,[s("a",b,[e("å—…æ¢æ¬ºéª— | å‡¡é—´çš„ç²¾çµ (chenzhonzhou.github.io)"),n(a)])]),s("p",null,[s("a",g,[e("ä¸­é—´äººæ”»å‡»ä¹‹ARPæ¬ºéª— - çŸ¥ä¹ (zhihu.com)"),n(a)])]),s("p",null,[s("a",f,[e("Telnet,Mstsc,SSH,FTPä¹‹é—´çš„æ¯”è¾ƒå’ŒåŒºåˆ« - ä¸Šå–„è‹¥æ³ª - åšå®¢å›­ (cnblogs.com)"),n(a)])]),s("p",null,[s("a",_,[e("å¸¸è§æœåŠ¡ç±»æ¼æ´ - Geekby's Blog"),n(a)])]),s("p",null,[s("a",H,[e("æ—­æ—¥é…’é¦† (xueyp.github.io)"),n(a)])])])]),E,y,s("blockquote",null,[s("p",null,[s("a",A,[e("ä»€ä¹ˆæ˜¯SSHï¼ŸSSHæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ - åä¸º (huawei.com)"),n(a)])]),x,s("p",null,[s("a",q,[e("SSH è¯ä¹¦ç™»å½•æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)"),n(a)])])]),B,s("blockquote",null,[s("p",null,[s("a",N,[e("Remote Service Session Hijacking: SSH Hijacking, Sub-technique T1563.001 - Enterprise | MITRE ATT&CKÂ®"),n(a)])])]),w,D,I,P,s("blockquote",null,[s("p",null,[s("a",R,[e("SSHæ¨ªå‘ç§»åŠ¨å¤‡å¿˜å•|sshå†…ç½‘æ¨ªå‘æ¸—é€æŠ€å·§ - ğŸ”°é›¨è‹â„’ğŸ”° (ddosi.org)"),n(a)])])]),T,n(o,{id:"mermaid-312",code:"eJxLL0osyFDwCeJSAILi0iQI3zknMzWvBCwGAo4aGj75yYk5Ch75xSW6NklFdoYGBnqGIGhsqKkJVpeal8KFakhwalFZahHcECcNjaDU3PySVCRTLI30DM0sgOYYGeIxJ9gD3SxnDY2AovyKSgxTTNFNcVTQ1bWrARnhnJ+Xl5pckpmfV6PgDJZzxirnxMUFAEshSAY="}),V])}const j=i(r,[["render",z],["__file","SSHæ¨ªå‘ç§»åŠ¨.html.vue"]]),K=JSON.parse('{"path":"/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/SSH%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8.html","title":"SSH æ¨ªå‘ç§»åŠ¨","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"SSH çš„æ¦‚å¿µ","slug":"ssh-çš„æ¦‚å¿µ","link":"#ssh-çš„æ¦‚å¿µ","children":[]},{"level":2,"title":"SSH çš„å·¥ä½œæµç¨‹","slug":"ssh-çš„å·¥ä½œæµç¨‹","link":"#ssh-çš„å·¥ä½œæµç¨‹","children":[]},{"level":2,"title":"æŸ¥æ‰¾ SSH å¯†é’¥","slug":"æŸ¥æ‰¾-ssh-å¯†é’¥","link":"#æŸ¥æ‰¾-ssh-å¯†é’¥","children":[]},{"level":2,"title":"SSH å¯†ç åé—¨","slug":"ssh-å¯†ç åé—¨","link":"#ssh-å¯†ç åé—¨","children":[]},{"level":2,"title":"SSH åå‘éš§é“","slug":"ssh-åå‘éš§é“","link":"#ssh-åå‘éš§é“","children":[{"level":3,"title":"æ–­ç½‘ä¸»æœºè”ç½‘","slug":"æ–­ç½‘ä¸»æœºè”ç½‘","link":"#æ–­ç½‘ä¸»æœºè”ç½‘","children":[]},{"level":3,"title":"è½¬å‘æµé‡","slug":"è½¬å‘æµé‡","link":"#è½¬å‘æµé‡","children":[]}]},{"level":2,"title":"SSH åŠ«æŒ","slug":"ssh-åŠ«æŒ","link":"#ssh-åŠ«æŒ","children":[{"level":3,"title":"SSH ä»£ç†è½¬å‘","slug":"ssh-ä»£ç†è½¬å‘","link":"#ssh-ä»£ç†è½¬å‘","children":[]},{"level":3,"title":"åŠ«æŒ SSH ä»£ç†è½¬å‘","slug":"åŠ«æŒ-ssh-ä»£ç†è½¬å‘","link":"#åŠ«æŒ-ssh-ä»£ç†è½¬å‘","children":[]}]}],"git":{"createdTime":1714444444000,"updatedTime":1714444444000,"contributors":[{"name":"233JG","email":"ayusummer233@gmail.com","commits":1}]},"readingTime":{"minutes":7.69,"words":2308},"filePathRelative":"ç½‘ç»œå®‰å…¨/å†…ç½‘æ¸—é€/æ¨ªå‘ç§»åŠ¨/SSHæ¨ªå‘ç§»åŠ¨.md","localizedDate":"2024å¹´4æœˆ30æ—¥","excerpt":"\\n<blockquote>\\n<p><a href=\\"https://www.ddosi.org/ssh-movement/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">SSHæ¨ªå‘ç§»åŠ¨å¤‡å¿˜å•|sshå†…ç½‘æ¨ªå‘æ¸—é€æŠ€å·§ - ğŸ”°é›¨è‹â„’ğŸ”° (ddosi.org)</a></p>\\n</blockquote>\\n<hr>\\n<h2>SSH çš„æ¦‚å¿µ</h2>\\n<blockquote>\\n<p><a href=\\"https://info.support.huawei.com/info-finder/encyclopedia/zh/SSH.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">ä»€ä¹ˆæ˜¯SSHï¼ŸSSHæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ - åä¸º (huawei.com)</a></p>\\n</blockquote>"}');export{j as comp,K as data};
