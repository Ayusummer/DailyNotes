import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as p,c,a as n,d as a,b as e,e as i}from"./app-DxMJFouC.js";const l={},r=n("h1",{id:"测试用例",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#测试用例"},[n("span",null,"测试用例")])],-1),u=n("ul",null,[n("li",null,[n("a",{href:"#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"},"测试用例")])],-1),d=n("hr",null,null,-1),k={href:"https://fastapi.tiangolo.com/zh/tutorial/testing/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.bilibili.com/video/BV1iN411X72b?p=43",target:"_blank",rel:"noopener noreferrer"},v=i(`<p>需要使用 <code>fastapi.testclient.TestClient</code> 以及 <code>pytest</code></p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token comment">#!/usr/bin/python3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>
<span class="token comment"># __author__ = &#39;__Jack__&#39;</span>

<span class="token keyword">from</span> fastapi<span class="token punctuation">.</span>testclient <span class="token keyword">import</span> TestClient

<span class="token keyword">from</span> <span class="token punctuation">.</span>run <span class="token keyword">import</span> app

<span class="token comment">##### Testing 测试用例 #####</span>

client <span class="token operator">=</span> TestClient<span class="token punctuation">(</span>app<span class="token punctuation">)</span>  <span class="token comment"># 先pip install pytest</span>


<span class="token keyword">def</span> <span class="token function">test_run_bg_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;函数名用“test_”开头是 pytest 的规范。注意不是 async def
    &quot;&quot;&quot;</span>
    response <span class="token operator">=</span> client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">&quot;/chapter08/background_tasks?framework=FastAPI&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;任务已在后台运行&quot;</span><span class="token punctuation">}</span>


<span class="token keyword">def</span> <span class="token function">test_dependency_run_bg_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">&quot;/chapter08/dependency/background_tasks&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token boolean">None</span>


<span class="token keyword">def</span> <span class="token function">test_dependency_run_bg_task_q</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span><span class="token string">&quot;/chapter08/dependency/background_tasks?q=1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;README.md更新成功&quot;</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试使用 <code>pytest</code> 进行测试</p><p>在命令行中 <code>cd</code> 到测试文件所在目录然后 <code>pytest</code></p><p><img src="http://cdn.ayusummer233.top/img/202205010201866.png" alt="image-20220501020126599"></p><hr>`,6);function b(_,g){const s=o("ExternalLinkIcon");return p(),c("div",null,[r,u,d,n("blockquote",null,[n("p",null,[n("a",k,[a("Testing - FastAPI (tiangolo.com)"),e(s)])]),n("p",null,[n("a",m,[a("【独家新技术】从0到1学习 FastAPI 框架的所有知识点_哔哩哔哩_bilibili"),e(s)])])]),v])}const y=t(l,[["render",b],["__file","测试用例.html.vue"]]),q=JSON.parse('{"path":"/%E5%90%8E%E7%AB%AF/FastAPI/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B.html","title":"测试用例","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"createdTime":1714457095000,"updatedTime":1714457095000,"contributors":[{"name":"233JG","email":"ayusummer233@gmail.com","commits":1}]},"readingTime":{"minutes":0.62,"words":185},"filePathRelative":"后端/FastAPI/测试用例.md","localizedDate":"2024年4月30日","excerpt":"\\n<ul>\\n<li><a href=\\"#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B\\">测试用例</a></li>\\n</ul>\\n<hr>\\n<blockquote>\\n<p><a href=\\"https://fastapi.tiangolo.com/zh/tutorial/testing/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Testing - FastAPI (tiangolo.com)</a></p>\\n<p><a href=\\"https://www.bilibili.com/video/BV1iN411X72b?p=43\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">【独家新技术】从0到1学习 FastAPI 框架的所有知识点_哔哩哔哩_bilibili</a></p>\\n</blockquote>"}');export{y as comp,q as data};
